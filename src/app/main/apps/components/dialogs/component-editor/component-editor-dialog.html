<!-- NOTE DIALOG -->
<md-dialog class="gb-component-section-dialog gb-card-row " aria-label="Card Dialog" ng-cloak>
 <md-toolbar class="gb-heading" layout="column" layout-align="start center" flex>
  <div class="md-toolbar-tools gb-container">
   <md-button ng-if="vm.componentHistory.length > 1"  class="md-icon-button"
              ng-click="vm.goBack()">
    <md-icon md-font-icon="fa fa-arrow-left"></md-icon>
   </md-button>
   <div class="gb-heading-title">
    <span class="ellipsis">
     {{vm.component.title}}
    </span>
   </div>
   <span flex></span>
   <md-button class="md-icon-button" ng-click="vm.closeDialog()" aria-label="Close Dialog"
              translate translate-attr-aria-label="SB.CLOSE_DIALOG">
    <md-icon md-font-icon="icon-close"></md-icon>
   </md-button>
  </div>
 </md-toolbar>
 <md-dialog-content ms-scroll>
  <div class="" layout="column" layout-align="start center">
   <div class="gb-container widget-group gb-card-row" layout="row" flex>
    <ms-widget class="gb-description-widget mt-10" layout="column" flex>
     <ms-widget-front class="md-whiteframe-1dp" layout="row" flex>
      <div layout="column" layout-align="start stretch" flex>
       <md-toolbar class="gb-heading">
        <div class="md-toolbar-tools">
         <md-button class="md-icon-button" aria-label="Description Icon">
          <md-icon class="gb-title-icon" md-font-icon="fa fa-list"></md-icon>
         </md-button>
         <div class="gb-heading-title">
          <span class="ellipsis">
           Description
          </span>
         </div>
         <span flex></span>
        </div>
       </md-toolbar>
       <div class="gb-title">
        <md-input-container class="md-block" md-no-float>
         <textarea ng-model="vm.component.title"
                   ng-model-options="{
                      updateOn: 'blur', debounce: 1000}" ng-change="vm.updateComponentDescription(vm.component)"
                   placeholder="Title" columns="1" md-maxlength="150" max-rows="15"></textarea>
        </md-input-container>
       </div>
       <div class="gb-description">
        <md-input-container class="md-block" md-no-float>
         <textarea ng-model="vm.component.description"
                   ng-model-options="{
                      updateOn: 'blur', debounce: 1000}" ng-change="vm.updateComponentDescription(vm.component)"
                   placeholder="Write a Description" columns="1" md-maxlength="250" max-rows="15"></textarea>
        </md-input-container>
       </div>
      </div>
      <div class="background-image-center" layout-align="center center"  flex>
       <md-icon md-font-icon="fa icon-gb-{{vm.component.type.title}}" class="gb-background-icon"></md-icon>
      </div>
     </ms-widget-front>
    </ms-widget>
   </div>
   <div class="gb-container" layout="column" flex="100" flex-sm="100">
    <div class="p-8" ng-repeat="section in vm.component.activities"
         ng-if="section.components.length > 0">
     <div class="gb-component-row-card gb-card-row md-whiteframe-1dp" layout="column" layout-align="start stretch" flex>

      <div class="gb-card-content" flex>
       <div class="gb-editable-component-card gb-card-row md-whiteframe-1dp" layout="column" layout-align="start stretch" flex
            ng-repeat="section in vm.component.activities"
            ng-if="section.components.length > 0">
        <md-toolbar class="gb-heading" flex>
         <div class="md-toolbar-tools">
          <md-button class="md-icon-button" aria-label="Description Icon">
           <md-icon class="gb-title-icon" md-font-icon="fa icon-users"></md-icon>
          </md-button>
          <div class="gb-heading-title">
           <span class="ellipsis">
            {{section.title}}
           </span>
          </div>
          <span flex></span>
         </div>
        </md-toolbar>
        <div class="gb-card-content" flex>
         <div ng-repeat="component in section.components" class="gb-title" ng-style="{
    'background-color':component.background_color.title}"
              layout="row"  layout-align="start center" >
          <div class="" flex>
           <md-input-container class="md-block" md-no-float>
            <input type="text" ng-model="component.title" placeholder="Title" md-maxlength="150">
           </md-input-container>
          </div>
          <div ng-if="component.stats.activities_count > 0" class="gb-label-stats" flex>
           {{component.stats.activities_count}}
           <i class="fa icon-gb-apply"></i>
          </div>
          <div class="gb-action-btn" flex>
           <md-button ng-click="vm.getComponent(component.id, vm.componentFormat.types)" class="md-icon-button" aria-label="open">
            <md-icon class="" md-font-icon="fa fa-chevron-right"></md-icon>
           </md-button>
          </div>
         </div>
         <form ng-submit="vm.createComponent(section)" class="gb-title">
          <md-input-container class="md-block" md-no-float>
           <input type="text" class="gb-add-component-input" ng-model="section.newComponent.title" placeholder='Add to "{{section.title}}"' md-maxlength="150">
          </md-input-container>
         </form>
        </div>
       </div>
      </div>
     </div>
    </div>
   </div>
  </div>
 </md-dialog-content>
</md-dialog>