angular.module("app.hobbys").controller("HobbyTimelinesCtrl",["HobbyTimelinesManager","$scope","$state","$stateParams","$http","$rootScope","$location","$uibModal","$log","$filter",function(a,b,c,d,e,f,g,h,i,j){var k=this;k.hobbyId=d.hobbyId,k.hobbyTimelinesCopy,k.hobbyTimelinesManager=new a,k.timelineFormDisplay=!1,k.defaultHobbyTimelineData={hobbyId:d.hobbyId,privacy:0},k.newHobbyTimelineData=angular.copy(k.defaultHobbyTimelineData),k.showTimelineForm=function(){k.timelineFormDisplay=!0},k.createHobbyTimeline=function(a){k.hobbyTimelinesManager.createHobbyTimeline(a).then(function(a){k.timelineFormDisplay=!1,k.newHobbyTimelineData=angular.copy(k.defaultHobbyTimelineData),k.hobbyTimelinesCopy=angular.copy(k.hobbyTimelinesManager.hobbyTimelines)},function(a){console.log(a)})},k.editHobbyTimeline=function(a){k.hobbyTimelinesManager.editHobbyTimeline(a).then(function(a){k.timelineFormDisplay=!1,k.newHobbyTimelineData=angular.copy(k.defaultHobbyTimelineData),k.hobbyTimelinesCopy=angular.copy(k.hobbyTimelinesManager.hobbyTimelines)},function(a){console.log(a)})},k.editHobbyTimelineSections={details:function(a,b){var c={hobbyTimelineId:a,title:b.title,description:b.description};k.editHobbyTimeline(c)}},k.cancelHobbyTimeline=function(a){k.timelineFormDisplay=!1,k.newHobbyTimelineData=angular.copy(k.defaultHobbyTimelineData),a&&(a.$setPristine(),a.$setUntouched())},k.revertHobbyTimeline=function(a,b){a=b},k.editedTimeline=null,b.$watch(angular.bind(this,function(){return k.hobbyTimelines}),function(){k.doneCount=k.hobbyTimelinesManager.hobbyTimelines.length-k.remainingCount,k.allChecked=!k.remainingCount},!0),k.editTimeline=function(a){k.editedTimeline=a,k.originalTimeline=angular.copy(a)},k.doneEditing=function(a){k.editedTimeline=null,a.title=a.title.trim(),a.title||k.removeTimeline(a)},k.openHobbyTimeline=function(a){var c=h.open({animation:!0,templateUrl:"hobby-timeline-modal.html",controller:"HobbyTimelineCtrl as hobbyTimelineCtrl",backdrop:"static",size:"xl",resolve:{hobbyTimelineData:function(){return a}}});c.result.then(function(a){b.selected=a},function(){i.info("Modal dismissed at: "+new Date)})},k.hobbyTimelinesManager.getHobbyTimelines(k.hobbyId)}]);