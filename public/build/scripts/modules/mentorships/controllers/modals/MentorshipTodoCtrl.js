angular.module("app.mentorships").controller("MentorshipTodoCtrl",["MentorshipTodoManager","MentorshipTodoChecklistManager","$uibModalInstance","$scope","$state","$stateParams","$http","$rootScope","$location","$log","mentorshipTodoData",function(a,b,c,d,e,f,g,h,i,j,k){var l=this;l.mentorshipId=k.mentorship_id,l.mentorshipTodoId=k.id,l.mentorshipTodoManager=new a,l.mentorshipTodoChecklistManager=new b,l.todoId=k.todo_id,l.checklistFormVisible=!1,l.todoFormDisplay=!1,l.defaultTodoChecklistData={todoId:l.todoId,privacy:0},l.newMentorshipTodoChecklistData=angular.copy(l.defaultTodoChecklistData),l.ok=function(){c.close()},l.close=function(){c.dismiss("cancel")},l.getMentorshipTodo=function(a,b){l.mentorshipTodoManager.getMentorshipTodo(a,b).then(function(a){},function(a){console.log(a)})},l.editMentorshipTodo=function(a){l.mentorshipTodoManager.editMentorshipTodo(a).then(function(a){},function(a){console.log(a)})},l.editMentorshipTodoSections={details:function(a){var b={mentorshipTodoId:l.mentorshipTodoId,title:a.title,description:a.description};l.editMentorshipTodo(b)}},l.getMentorshipTodoChecklist=function(a){l.mentorshipTodoChecklistManager.getMentorshipTodoChecklist(a).then(function(a){},function(a){console.log(a)})},l.showTodoForm=function(){l.todoFormDisplay=!0},l.createMentorshipTodoChecklistItem=function(a){l.mentorshipTodoChecklistManager.createMentorshipTodoChecklistItem(a).then(function(a){l.checklistFormVisible=!1,l.newMentorshipTodoChecklistData=angular.copy(l.defaultTodoChecklistData)},function(a){console.log(a)})},l.editMentorshipTodoChecklistItem=function(a){l.mentorshipTodoChecklistManager.editMentorshipTodoChecklistItem(a).then(function(a){l.newMentorshipTodoChecklistData=angular.copy(l.defaultTodoChecklistData)},function(a){console.log(a)})},l.editMentorshipTodoChecklistItemSections={title:function(a,b){var c={checklistId:a,title:b};l.editMentorshipTodoChecklistItem(c)}},l.cancelChecklistForm=function(a){l.checklistFormVisible=!1,l.newMentorshipTodoChecklistData=angular.copy(l.defaultTodoChecklistData),a&&(a.$setPristine(),a.$setUntouched())},d.$watch(angular.bind(this,function(){return l.mentorshipTodoChecklistManager.mentorshipTodoChecklist}),function(){l.doneCount=l.mentorshipTodoChecklistManager.mentorshipTodoChecklist.length-l.remainingCount,l.allChecked=!l.remainingCount},!0),l.getMentorshipTodo(l.mentorshipId,l.todoId),l.getMentorshipTodoChecklist(l.todoId)}]);