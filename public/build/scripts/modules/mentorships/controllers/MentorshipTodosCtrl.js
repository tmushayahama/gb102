angular.module("app.mentorships").controller("MentorshipTodosCtrl",["MentorshipTodosManager","$scope","$state","$stateParams","$http","$rootScope","$location","$uibModal","$log",function(a,b,c,d,e,f,g,h,i){var j=this;j.mentorshipId=d.mentorshipId,j.mentorshipTodosManager=new a,j.todoFormDisplay=!1,j.defaultMentorshipTodoData={mentorshipId:d.mentorshipId,privacy:0},j.newMentorshipTodoData=angular.copy(j.defaultMentorshipTodoData),j.showTodoForm=function(){j.todoFormDisplay=!0},j.createMentorshipTodo=function(a){j.mentorshipTodosManager.createMentorshipTodo(a).then(function(a){j.todoFormDisplay=!1,j.newMentorshipTodoData=angular.copy(j.defaultMentorshipTodoData)},function(a){console.log(a)})},j.editMentorshipTodo=function(a){j.mentorshipTodosManager.editMentorshipTodo(a).then(function(a){j.todoFormDisplay=!1,j.newMentorshipTodoData=angular.copy(j.defaultMentorshipTodoData)},function(a){console.log(a)})},j.editMentorshipTodoSections={title:function(a,b){var c={mentorshipTodoId:a,title:b};j.editMentorshipTodo(c)}},j.cancelMentorshipTodo=function(a){j.todoFormDisplay=!1,j.newMentorshipTodoData=angular.copy(j.defaultMentorshipTodoData),a&&(a.$setPristine(),a.$setUntouched())},j.editedTodo=null,b.$watch(angular.bind(this,function(){return j.mentorshipTodos}),function(){j.doneCount=j.mentorshipTodosManager.mentorshipTodos.length-j.remainingCount,j.allChecked=!j.remainingCount},!0),j.editTodo=function(a){j.editedTodo=a,j.originalTodo=angular.copy(a)},j.doneEditing=function(a){j.editedTodo=null,a.title=a.title.trim(),a.title||j.removeTodo(a)},j.openMentorshipTodo=function(a){var c=h.open({animation:!0,templateUrl:"mentorship-todo-modal.html",controller:"MentorshipTodoCtrl as mentorshipTodoCtrl",backdrop:"static",size:"xl",resolve:{mentorshipTodoData:function(){return a}}});c.result.then(function(a){b.selected=a},function(){i.info("Modal dismissed at: "+new Date)})},j.mentorshipTodosManager.getMentorshipTodos(j.mentorshipId)}]);