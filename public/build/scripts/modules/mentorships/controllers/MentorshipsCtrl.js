angular.module("app.mentorships").controller("MentorshipsCtrl",["ConstantsManager","MentorshipsManager","$scope","$state","$stateParams","$http","$rootScope","$location","$uibModal","$log","$filter","$css",function(a,b,c,d,e,f,g,h,i,j,k,l){var m=this;l.bind({href:"public/css/gb-sass/stylesheets/gb-themes/app-theme-5.css"},c),m.mentorshipsManager=new b,m.constantsManager=new a,m.mentorshipLevels,m.createMentorship=function(a){m.mentorshipsManager.createMentorship(a).then(function(a){m.FormDisplay=!1,m.newMentorshipData=angular.copy(m.defaultMentorshipData),m.mentorshipsCopy=angular.copy(m.mentorshipsManager.mentorships)},function(a){console.log(a)})},m.editMentorship=function(a){m.mentorshipsManager.editMentorship(a).then(function(a){m.FormDisplay=!1,m.newMentorshipData=angular.copy(m.defaultMentorshipData),m.mentorshipsCopy=angular.copy(m.mentorshipsManager.mentorships)},function(a){console.log(a)})},m.editMentorshipSections={details:function(a,b){var c={mentorshipId:a,title:b.title,description:b.description};m.editMentorship(c)}},m.cancelMentorship=function(a){m.FormDisplay=!1,m.newMentorshipData=angular.copy(m.defaultMentorshipData),a&&(a.$setPristine(),a.$setUntouched())},m.revertMentorship=function(a,b){a=b},m.edited=null,c.$watch(angular.bind(this,function(){return m.mentorships}),function(){m.doneCount=m.mentorshipsManager.mentorships.length-m.remainingCount,m.allChecked=!m.remainingCount},!0),m.edit=function(a){m.edited=a,m.original=angular.copy(a)},m.doneEditing=function(a){m.edited=null,a.title=a.title.trim(),a.title||m.remove(a)},m.openAddMentorshipModal=function(){var a=i.open({animation:!0,templateUrl:"add-mentorship-modal.html",controller:"AddMentorshipCtrl as addMentorshipCtrl",backdrop:"static",size:"xl",resolve:{mentorshipLevels:function(){return m.mentorshipLevels}}});a.result.then(function(a){m.mentorshipsManager.createMentorship(a)},function(){j.info("Modal dismissed at: "+new Date)})},m.constantsManager.getLevel(1).then(function(a){m.mentorshipLevels=a})}]);