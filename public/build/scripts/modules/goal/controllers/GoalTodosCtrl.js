var goalTodosCtrl=function(GoalTodosManager,$scope,$state,$stateParams,$http,$rootScope,$location,$uibModal,$log){var vm=this;vm.goalId=$stateParams.goalId,vm.goalTodosManager=new GoalTodosManager,vm.todoFormDisplay=!1,vm.defaultGoalTodoData={goalId:$stateParams.goalId,privacy:0},vm.newGoalTodoData=angular.copy(vm.defaultGoalTodoData),vm.showTodoForm=function(){vm.todoFormDisplay=!0},vm.createGoalTodo=function(data){vm.goalTodosManager.createGoalTodo(data).then(function(response){vm.todoFormDisplay=!1,vm.newGoalTodoData=angular.copy(vm.defaultGoalTodoData)},function(response){console.log(response)})},vm.editGoalTodo=function(data){vm.goalTodosManager.editGoalTodo(data).then(function(response){vm.todoFormDisplay=!1,vm.newGoalTodoData=angular.copy(vm.defaultGoalTodoData)},function(response){console.log(response)})},vm.editGoalTodoSections={title:function(goalTodoId,title){var goalTodoData={goalTodoId:goalTodoId,title:title};vm.editGoalTodo(goalTodoData)}},vm.cancelGoalTodo=function(form){vm.todoFormDisplay=!1,vm.newGoalTodoData=angular.copy(vm.defaultGoalTodoData),form&&(form.$setPristine(),form.$setUntouched())},vm.editedTodo=null,$scope.$watch(angular.bind(this,function(){return vm.goalTodos}),function(){vm.doneCount=vm.goalTodosManager.goalTodos.length-vm.remainingCount,vm.allChecked=!vm.remainingCount},!0),vm.editTodo=function(goalTodo){vm.editedTodo=goalTodo,vm.originalTodo=angular.copy(goalTodo)},vm.doneEditing=function(goalTodo){vm.editedTodo=null,goalTodo.title=goalTodo.title.trim(),goalTodo.title||vm.removeTodo(goalTodo)},vm.openGoalTodo=function(goalTodo){var modalInstance=$uibModal.open({animation:!0,templateUrl:"goal-todo-modal.html",controller:"GoalTodoCtrl as goalTodoCtrl",backdrop:"static",size:"xl",resolve:{goalTodoData:function(){return goalTodo}}});modalInstance.result.then(function(selectedItem){$scope.selected=selectedItem},function(){$log.info("Modal dismissed at: "+new Date)})},vm.goalTodosManager.getGoalTodos(vm.goalId)};goalTodosCtrl.$inject=["GoalTodosManager","$scope","$state","$stateParams","$http","$rootScope","$location","$uibModal","$log"],angular.module("app.goal").controller("GoalTodosCtrl",goalTodosCtrl);