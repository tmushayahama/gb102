var teachTimelinesCtrl=function(TeachTimelinesManager,$scope,$state,$stateParams,$http,$rootScope,$location,$uibModal,$log,$filter){var vm=this;vm.teachId=$stateParams.teachId,vm.teachTimelinesCopy,vm.teachTimelinesManager=new TeachTimelinesManager,vm.timelineFormDisplay=!1,vm.defaultTeachTimelineData={teachId:$stateParams.teachId,privacy:0},vm.newTeachTimelineData=angular.copy(vm.defaultTeachTimelineData),vm.showTimelineForm=function(){vm.timelineFormDisplay=!0},vm.createTeachTimeline=function(data){vm.teachTimelinesManager.createTeachTimeline(data).then(function(response){vm.timelineFormDisplay=!1,vm.newTeachTimelineData=angular.copy(vm.defaultTeachTimelineData),vm.teachTimelinesCopy=angular.copy(vm.teachTimelinesManager.teachTimelines)},function(response){console.log(response)})},vm.editTeachTimeline=function(data){vm.teachTimelinesManager.editTeachTimeline(data).then(function(response){vm.timelineFormDisplay=!1,vm.newTeachTimelineData=angular.copy(vm.defaultTeachTimelineData),vm.teachTimelinesCopy=angular.copy(vm.teachTimelinesManager.teachTimelines)},function(response){console.log(response)})},vm.editTeachTimelineSections={details:function(teachTimelineId,detail){var teachTimelineData={teachTimelineId:teachTimelineId,title:detail.title,description:detail.description};vm.editTeachTimeline(teachTimelineData)}},vm.cancelTeachTimeline=function(form){vm.timelineFormDisplay=!1,vm.newTeachTimelineData=angular.copy(vm.defaultTeachTimelineData),form&&(form.$setPristine(),form.$setUntouched())},vm.revertTeachTimeline=function(teachTimeline,teachTimelineCopy){teachTimeline=teachTimelineCopy},vm.editedTimeline=null,$scope.$watch(angular.bind(this,function(){return vm.teachTimelines}),function(){vm.doneCount=vm.teachTimelinesManager.teachTimelines.length-vm.remainingCount,vm.allChecked=!vm.remainingCount},!0),vm.editTimeline=function(teachTimeline){vm.editedTimeline=teachTimeline,vm.originalTimeline=angular.copy(teachTimeline)},vm.doneEditing=function(teachTimeline){vm.editedTimeline=null,teachTimeline.title=teachTimeline.title.trim(),teachTimeline.title||vm.removeTimeline(teachTimeline)},vm.openTeachTimeline=function(teachTimeline){var modalInstance=$uibModal.open({animation:!0,templateUrl:"teach-timeline-modal.html",controller:"TeachTimelineCtrl as teachTimelineCtrl",backdrop:"static",size:"xl",resolve:{teachTimelineData:function(){return teachTimeline}}});modalInstance.result.then(function(selectedItem){$scope.selected=selectedItem},function(){$log.info("Modal dismissed at: "+new Date)})},vm.teachTimelinesManager.getTeachTimelines(vm.teachId)};teachTimelinesCtrl.$inject=["TeachTimelinesManager","$scope","$state","$stateParams","$http","$rootScope","$location","$uibModal","$log","$filter"],angular.module("app.teach").controller("TeachTimelinesCtrl",teachTimelinesCtrl);