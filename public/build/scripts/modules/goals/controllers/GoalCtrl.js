angular.module("app.goals").controller("GoalCtrl",["_","ConstantsManager","GoalManager","$scope","$state","$stateParams","$http","$rootScope","$location","$uibModal","$log","$filter","$css",function(a,b,c,d,e,f,g,h,i,j,k,l,m){var n=this;m.bind({href:"public/css/gb-sass/stylesheets/gb-themes/app-theme-2.css"},d),n.goal=[];n.range=function(b,c){return a.range(b,c)},n.goalIcons=[],n.goalIconsArray=[];var o=function(a,b){return Math.floor(Math.random()*b+a)};n.getRandomGoalIcons=function(){for(var a=0;5>a;a++){for(var b=[],c=0;c<n.goalIcons.length;c++){var d=o(0,n.goalIcons.length);b.push(n.goalIcons[d].name)}n.goalIconsArray.push(b)}},n.goalId=f.goalId,n.goalManager=new c,n.constantsManager=new b,n.goalFormDisplay=!1,n.getGoal=function(a,b){n.goalManager.getGoal(a,b).success(function(a){n.goal=a}).error(function(a){console.log(a)})},n.defaultGoalData={goalId:f.goalId,privacy:0},n.newGoalData=angular.copy(n.defaultGoalData),n.showForm=function(){n.FormDisplay=!0},n.createGoal=function(a){n.goalManager.createGoal(a).then(function(a){n.FormDisplay=!1,n.newGoalData=angular.copy(n.defaultGoalData),n.goalCopy=angular.copy(n.goalManager.goal)},function(a){console.log(a)})},n.editGoal=function(a){n.goalManager.editGoal(a).then(function(a){n.FormDisplay=!1,n.newGoalData=angular.copy(n.defaultGoalData),n.goalCopy=angular.copy(n.goalManager.goal)},function(a){console.log(a)})},n.editGoalSections={details:function(a,b){var c={goalId:a,title:b.title,description:b.description};n.editGoal(c)}},n.cancelGoal=function(a){n.FormDisplay=!1,n.newGoalData=angular.copy(n.defaultGoalData),a&&(a.$setPristine(),a.$setUntouched())},n.revertGoal=function(a,b){a=b},n.edited=null,d.$watch(angular.bind(this,function(){return n.goal}),function(){n.doneCount=n.goalManager.goal.length-n.remainingCount,n.allChecked=!n.remainingCount},!0),n.edit=function(a){n.edited=a,n.original=angular.copy(a)},n.doneEditing=function(a){n.edited=null,a.title=a.title.trim(),a.title||n.remove(a)},n.goalManager.getGoal(n.goalId),n.constantsManager.getIcons(1).then(function(a){n.goalIcons=a,n.getRandomGoalIcons()})}]);