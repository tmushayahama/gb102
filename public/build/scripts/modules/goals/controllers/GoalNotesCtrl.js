var goalNotesCtrl=function(GoalNotesManager,$scope,$state,$stateParams,$http,$rootScope,$location,$uibModal,$log,$filter){var vm=this;vm.goalId=$stateParams.goalId,vm.goalNotesCopy,vm.goalNotesManager=new GoalNotesManager,vm.noteFormDisplay=!1,vm.defaultGoalNoteData={goalId:$stateParams.goalId,privacy:0},vm.newGoalNoteData=angular.copy(vm.defaultGoalNoteData),vm.showNoteForm=function(){vm.noteFormDisplay=!0},vm.createGoalNote=function(data){vm.goalNotesManager.createGoalNote(data).then(function(response){vm.noteFormDisplay=!1,vm.newGoalNoteData=angular.copy(vm.defaultGoalNoteData),vm.goalNotesCopy=angular.copy(vm.goalNotesManager.goalNotes)},function(response){console.log(response)})},vm.editGoalNote=function(data){vm.goalNotesManager.editGoalNote(data).then(function(response){vm.noteFormDisplay=!1,vm.newGoalNoteData=angular.copy(vm.defaultGoalNoteData),vm.goalNotesCopy=angular.copy(vm.goalNotesManager.goalNotes)},function(response){console.log(response)})},vm.editGoalNoteSections={details:function(goalNoteId,detail){var goalNoteData={goalNoteId:goalNoteId,title:detail.title,description:detail.description};vm.editGoalNote(goalNoteData)}},vm.cancelGoalNote=function(form){vm.noteFormDisplay=!1,vm.newGoalNoteData=angular.copy(vm.defaultGoalNoteData),form&&(form.$setPristine(),form.$setUntouched())},vm.revertGoalNote=function(goalNote,goalNoteCopy){goalNote=goalNoteCopy},vm.editedNote=null,$scope.$watch(angular.bind(this,function(){return vm.goalNotes}),function(){vm.doneCount=vm.goalNotesManager.goalNotes.length-vm.remainingCount,vm.allChecked=!vm.remainingCount},!0),vm.editNote=function(goalNote){vm.editedNote=goalNote,vm.originalNote=angular.copy(goalNote)},vm.doneEditing=function(goalNote){vm.editedNote=null,goalNote.title=goalNote.title.trim(),goalNote.title||vm.removeNote(goalNote)},vm.openGoalNote=function(goalNote){var modalInstance=$uibModal.open({animation:!0,templateUrl:"goal-note-modal.html",controller:"GoalNoteCtrl as goalNoteCtrl",backdrop:"static",size:"xl",resolve:{goalNoteData:function(){return goalNote}}});modalInstance.result.then(function(selectedItem){$scope.selected=selectedItem},function(){$log.info("Modal dismissed at: "+new Date)})},vm.goalNotesManager.getGoalNotes(vm.goalId)};goalNotesCtrl.$inject=["GoalNotesManager","$scope","$state","$stateParams","$http","$rootScope","$location","$uibModal","$log","$filter"],angular.module("app.goals").controller("GoalNotesCtrl",goalNotesCtrl);