var goalCommentsCtrl=function(GoalCommentsManager,$scope,$state,$stateParams,$http,$rootScope,$location,$uibModal,$log,$filter){var vm=this;vm.goalId=$stateParams.goalId,vm.goalCommentsCopy,vm.goalCommentsManager=new GoalCommentsManager,vm.commentFormDisplay=!1,vm.defaultGoalCommentData={goalId:$stateParams.goalId,privacy:0},vm.newGoalCommentData=angular.copy(vm.defaultGoalCommentData),vm.showCommentForm=function(){vm.commentFormDisplay=!0},vm.createGoalComment=function(data){vm.goalCommentsManager.createGoalComment(data).then(function(response){vm.commentFormDisplay=!1,vm.newGoalCommentData=angular.copy(vm.defaultGoalCommentData),vm.goalCommentsCopy=angular.copy(vm.goalCommentsManager.goalComments)},function(response){console.log(response)})},vm.editGoalComment=function(data){vm.goalCommentsManager.editGoalComment(data).then(function(response){vm.commentFormDisplay=!1,vm.newGoalCommentData=angular.copy(vm.defaultGoalCommentData),vm.goalCommentsCopy=angular.copy(vm.goalCommentsManager.goalComments)},function(response){console.log(response)})},vm.editGoalCommentSections={details:function(goalCommentId,detail){var goalCommentData={goalCommentId:goalCommentId,title:detail.title,description:detail.description};vm.editGoalComment(goalCommentData)}},vm.cancelGoalComment=function(form){vm.commentFormDisplay=!1,vm.newGoalCommentData=angular.copy(vm.defaultGoalCommentData),form&&(form.$setPristine(),form.$setUntouched())},vm.revertGoalComment=function(goalComment,goalCommentCopy){goalComment=goalCommentCopy},vm.editedComment=null,$scope.$watch(angular.bind(this,function(){return vm.goalComments}),function(){vm.doneCount=vm.goalCommentsManager.goalComments.length-vm.remainingCount,vm.allChecked=!vm.remainingCount},!0),vm.editComment=function(goalComment){vm.editedComment=goalComment,vm.originalComment=angular.copy(goalComment)},vm.doneEditing=function(goalComment){vm.editedComment=null,goalComment.title=goalComment.title.trim(),goalComment.title||vm.removeComment(goalComment)},vm.openGoalComment=function(goalComment){var modalInstance=$uibModal.open({animation:!0,templateUrl:"goal-comment-modal.html",controller:"GoalCommentCtrl as goalCommentCtrl",backdrop:"static",size:"xl",resolve:{goalCommentData:function(){return goalComment}}});modalInstance.result.then(function(selectedItem){$scope.selected=selectedItem},function(){$log.info("Modal dismissed at: "+new Date)})},vm.goalCommentsManager.getGoalComments(vm.goalId)};goalCommentsCtrl.$inject=["GoalCommentsManager","$scope","$state","$stateParams","$http","$rootScope","$location","$uibModal","$log","$filter"],angular.module("app.goals").controller("GoalCommentsCtrl",goalCommentsCtrl);