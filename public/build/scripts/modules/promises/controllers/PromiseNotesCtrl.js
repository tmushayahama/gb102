var promiseNotesCtrl=function(PromiseNotesManager,$scope,$state,$stateParams,$http,$rootScope,$location,$uibModal,$log,$filter){var vm=this;vm.promiseId=$stateParams.promiseId,vm.promiseNotesCopy,vm.promiseNotesManager=new PromiseNotesManager,vm.noteFormDisplay=!1,vm.defaultPromiseNoteData={promiseId:$stateParams.promiseId,privacy:0},vm.newPromiseNoteData=angular.copy(vm.defaultPromiseNoteData),vm.showNoteForm=function(){vm.noteFormDisplay=!0},vm.createPromiseNote=function(data){vm.promiseNotesManager.createPromiseNote(data).then(function(response){vm.noteFormDisplay=!1,vm.newPromiseNoteData=angular.copy(vm.defaultPromiseNoteData),vm.promiseNotesCopy=angular.copy(vm.promiseNotesManager.promiseNotes)},function(response){console.log(response)})},vm.editPromiseNote=function(data){vm.promiseNotesManager.editPromiseNote(data).then(function(response){vm.noteFormDisplay=!1,vm.newPromiseNoteData=angular.copy(vm.defaultPromiseNoteData),vm.promiseNotesCopy=angular.copy(vm.promiseNotesManager.promiseNotes)},function(response){console.log(response)})},vm.editPromiseNoteSections={details:function(promiseNoteId,detail){var promiseNoteData={promiseNoteId:promiseNoteId,title:detail.title,description:detail.description};vm.editPromiseNote(promiseNoteData)}},vm.cancelPromiseNote=function(form){vm.noteFormDisplay=!1,vm.newPromiseNoteData=angular.copy(vm.defaultPromiseNoteData),form&&(form.$setPristine(),form.$setUntouched())},vm.revertPromiseNote=function(promiseNote,promiseNoteCopy){promiseNote=promiseNoteCopy},vm.editedNote=null,$scope.$watch(angular.bind(this,function(){return vm.promiseNotes}),function(){vm.doneCount=vm.promiseNotesManager.promiseNotes.length-vm.remainingCount,vm.allChecked=!vm.remainingCount},!0),vm.editNote=function(promiseNote){vm.editedNote=promiseNote,vm.originalNote=angular.copy(promiseNote)},vm.doneEditing=function(promiseNote){vm.editedNote=null,promiseNote.title=promiseNote.title.trim(),promiseNote.title||vm.removeNote(promiseNote)},vm.openPromiseNote=function(promiseNote){var modalInstance=$uibModal.open({animation:!0,templateUrl:"promise-note-modal.html",controller:"PromiseNoteCtrl as promiseNoteCtrl",backdrop:"static",size:"xl",resolve:{promiseNoteData:function(){return promiseNote}}});modalInstance.result.then(function(selectedItem){$scope.selected=selectedItem},function(){$log.info("Modal dismissed at: "+new Date)})},vm.promiseNotesManager.getPromiseNotes(vm.promiseId)};promiseNotesCtrl.$inject=["PromiseNotesManager","$scope","$state","$stateParams","$http","$rootScope","$location","$uibModal","$log","$filter"],angular.module("app.promises").controller("PromiseNotesCtrl",promiseNotesCtrl);