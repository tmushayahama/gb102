var promiseCtrl=function(_,ConstantsManager,PromiseManager,$scope,$state,$stateParams,$http,$rootScope,$location,$uibModal,$log,$filter,$css){var vm=this;$css.bind({href:"public/build/css/gb-sass/stylesheets/gb-themes/app-theme-3.css"},$scope),vm.promise=[];vm.range=function(min,max){return _.range(min,max)},vm.promiseIcons=[],vm.promiseIconsArray=[];var getRand=function(min,max){return Math.floor(Math.random()*max+min)};vm.getRandomPromiseIcons=function(){for(var i=0;5>i;i++){for(var rowArray=[],j=0;j<vm.promiseIcons.length;j++){var rand=getRand(0,vm.promiseIcons.length);rowArray.push(vm.promiseIcons[rand].name)}vm.promiseIconsArray.push(rowArray)}},vm.promiseId=$stateParams.promiseId,vm.promiseManager=new PromiseManager,vm.constantsManager=new ConstantsManager,vm.promiseFormDisplay=!1,vm.getPromise=function(id,data){vm.promiseManager.getPromise(id,data).success(function(response){vm.promise=response}).error(function(response){console.log(response)})},vm.defaultPromiseData={promiseId:$stateParams.promiseId,privacy:0},vm.newPromiseData=angular.copy(vm.defaultPromiseData),vm.showForm=function(){vm.FormDisplay=!0},vm.createPromise=function(data){vm.promiseManager.createPromise(data).then(function(response){vm.FormDisplay=!1,vm.newPromiseData=angular.copy(vm.defaultPromiseData),vm.promiseCopy=angular.copy(vm.promiseManager.promise)},function(response){console.log(response)})},vm.editPromise=function(data){vm.promiseManager.editPromise(data).then(function(response){vm.FormDisplay=!1,vm.newPromiseData=angular.copy(vm.defaultPromiseData),vm.promiseCopy=angular.copy(vm.promiseManager.promise)},function(response){console.log(response)})},vm.editPromiseSections={details:function(promiseId,detail){var promiseData={promiseId:promiseId,title:detail.title,description:detail.description};vm.editPromise(promiseData)}},vm.cancelPromise=function(form){vm.FormDisplay=!1,vm.newPromiseData=angular.copy(vm.defaultPromiseData),form&&(form.$setPristine(),form.$setUntouched())},vm.revertPromise=function(promise,promiseCopy){promise=promiseCopy},vm.edited=null,$scope.$watch(angular.bind(this,function(){return vm.promise}),function(){vm.doneCount=vm.promiseManager.promise.length-vm.remainingCount,vm.allChecked=!vm.remainingCount},!0),vm.edit=function(promise){vm.edited=promise,vm.original=angular.copy(promise)},vm.doneEditing=function(promise){vm.edited=null,promise.title=promise.title.trim(),promise.title||vm.remove(promise)},vm.promiseManager.getPromise(vm.promiseId),vm.constantsManager.getIcons(1).then(function(data){vm.promiseIcons=data,vm.getRandomPromiseIcons()})};promiseCtrl.$inject=["_","ConstantsManager","PromiseManager","$scope","$state","$stateParams","$http","$rootScope","$location","$uibModal","$log","$filter","$css"],angular.module("app.promises").controller("PromiseCtrl",promiseCtrl);