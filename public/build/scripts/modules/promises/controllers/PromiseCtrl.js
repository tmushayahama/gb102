angular.module("app.promises").controller("PromiseCtrl",["_","ConstantsManager","PromiseManager","$scope","$state","$stateParams","$http","$rootScope","$location","$uibModal","$log","$filter","$css",function(a,b,c,d,e,f,g,h,i,j,k,l,m){var n=this;m.bind({href:"public/css/gb-sass/stylesheets/gb-themes/app-theme-3.css"},d),n.promise=[];n.range=function(b,c){return a.range(b,c)},n.promiseIcons=[],n.promiseIconsArray=[];var o=function(a,b){return Math.floor(Math.random()*b+a)};n.getRandomPromiseIcons=function(){for(var a=0;5>a;a++){for(var b=[],c=0;c<n.promiseIcons.length;c++){var d=o(0,n.promiseIcons.length);b.push(n.promiseIcons[d].name)}n.promiseIconsArray.push(b)}},n.promiseId=f.promiseId,n.promiseManager=new c,n.constantsManager=new b,n.promiseFormDisplay=!1,n.getPromise=function(a,b){n.promiseManager.getPromise(a,b).success(function(a){n.promise=a}).error(function(a){console.log(a)})},n.defaultPromiseData={promiseId:f.promiseId,privacy:0},n.newPromiseData=angular.copy(n.defaultPromiseData),n.showForm=function(){n.FormDisplay=!0},n.createPromise=function(a){n.promiseManager.createPromise(a).then(function(a){n.FormDisplay=!1,n.newPromiseData=angular.copy(n.defaultPromiseData),n.promiseCopy=angular.copy(n.promiseManager.promise)},function(a){console.log(a)})},n.editPromise=function(a){n.promiseManager.editPromise(a).then(function(a){n.FormDisplay=!1,n.newPromiseData=angular.copy(n.defaultPromiseData),n.promiseCopy=angular.copy(n.promiseManager.promise)},function(a){console.log(a)})},n.editPromiseSections={details:function(a,b){var c={promiseId:a,title:b.title,description:b.description};n.editPromise(c)}},n.cancelPromise=function(a){n.FormDisplay=!1,n.newPromiseData=angular.copy(n.defaultPromiseData),a&&(a.$setPristine(),a.$setUntouched())},n.revertPromise=function(a,b){a=b},n.edited=null,d.$watch(angular.bind(this,function(){return n.promise}),function(){n.doneCount=n.promiseManager.promise.length-n.remainingCount,n.allChecked=!n.remainingCount},!0),n.edit=function(a){n.edited=a,n.original=angular.copy(a)},n.doneEditing=function(a){n.edited=null,a.title=a.title.trim(),a.title||n.remove(a)},n.promiseManager.getPromise(n.promiseId),n.constantsManager.getIcons(1).then(function(a){n.promiseIcons=a,n.getRandomPromiseIcons()})}]);