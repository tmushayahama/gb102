var communityWeblinksCtrl=function(CommunityWeblinksManager,$scope,$state,$stateParams,$http,$rootScope,$location,$uibModal,$log,$filter){var vm=this;vm.communityId=$stateParams.communityId,vm.communityWeblinksCopy,vm.communityWeblinksManager=new CommunityWeblinksManager,vm.weblinkFormDisplay=!1,vm.defaultCommunityWeblinkData={communityId:$stateParams.communityId,privacy:0},vm.newCommunityWeblinkData=angular.copy(vm.defaultCommunityWeblinkData),vm.showWeblinkForm=function(){vm.weblinkFormDisplay=!0},vm.createCommunityWeblink=function(data){vm.communityWeblinksManager.createCommunityWeblink(data).then(function(response){vm.weblinkFormDisplay=!1,vm.newCommunityWeblinkData=angular.copy(vm.defaultCommunityWeblinkData),vm.communityWeblinksCopy=angular.copy(vm.communityWeblinksManager.communityWeblinks)},function(response){console.log(response)})},vm.editCommunityWeblink=function(data){vm.communityWeblinksManager.editCommunityWeblink(data).then(function(response){vm.weblinkFormDisplay=!1,vm.newCommunityWeblinkData=angular.copy(vm.defaultCommunityWeblinkData),vm.communityWeblinksCopy=angular.copy(vm.communityWeblinksManager.communityWeblinks)},function(response){console.log(response)})},vm.editCommunityWeblinkSections={details:function(communityWeblinkId,detail){var communityWeblinkData={communityWeblinkId:communityWeblinkId,title:detail.title,description:detail.description};vm.editCommunityWeblink(communityWeblinkData)}},vm.cancelCommunityWeblink=function(form){vm.weblinkFormDisplay=!1,vm.newCommunityWeblinkData=angular.copy(vm.defaultCommunityWeblinkData),form&&(form.$setPristine(),form.$setUntouched())},vm.revertCommunityWeblink=function(communityWeblink,communityWeblinkCopy){communityWeblink=communityWeblinkCopy},vm.editedWeblink=null,$scope.$watch(angular.bind(this,function(){return vm.communityWeblinks}),function(){vm.doneCount=vm.communityWeblinksManager.communityWeblinks.length-vm.remainingCount,vm.allChecked=!vm.remainingCount},!0),vm.editWeblink=function(communityWeblink){vm.editedWeblink=communityWeblink,vm.originalWeblink=angular.copy(communityWeblink)},vm.doneEditing=function(communityWeblink){vm.editedWeblink=null,communityWeblink.title=communityWeblink.title.trim(),communityWeblink.title||vm.removeWeblink(communityWeblink)},vm.openCommunityWeblink=function(communityWeblink){var modalInstance=$uibModal.open({animation:!0,templateUrl:"community-weblink-modal.html",controller:"CommunityWeblinkCtrl as communityWeblinkCtrl",backdrop:"static",size:"xl",resolve:{communityWeblinkData:function(){return communityWeblink}}});modalInstance.result.then(function(selectedItem){$scope.selected=selectedItem},function(){$log.info("Modal dismissed at: "+new Date)})},vm.communityWeblinksManager.getCommunityWeblinks(vm.communityId)};communityWeblinksCtrl.$inject=["CommunityWeblinksManager","$scope","$state","$stateParams","$http","$rootScope","$location","$uibModal","$log","$filter"],angular.module("app.communitys").controller("CommunityWeblinksCtrl",communityWeblinksCtrl);