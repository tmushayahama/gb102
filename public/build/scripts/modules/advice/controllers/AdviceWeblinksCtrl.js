var adviceWeblinksCtrl=function(AdviceWeblinksManager,$scope,$state,$stateParams,$http,$rootScope,$location,$uibModal,$log,$filter){var vm=this;vm.adviceId=$stateParams.adviceId,vm.adviceWeblinksCopy,vm.adviceWeblinksManager=new AdviceWeblinksManager,vm.weblinkFormDisplay=!1,vm.defaultAdviceWeblinkData={adviceId:$stateParams.adviceId,privacy:0},vm.newAdviceWeblinkData=angular.copy(vm.defaultAdviceWeblinkData),vm.showWeblinkForm=function(){vm.weblinkFormDisplay=!0},vm.createAdviceWeblink=function(data){vm.adviceWeblinksManager.createAdviceWeblink(data).then(function(response){vm.weblinkFormDisplay=!1,vm.newAdviceWeblinkData=angular.copy(vm.defaultAdviceWeblinkData),vm.adviceWeblinksCopy=angular.copy(vm.adviceWeblinksManager.adviceWeblinks)},function(response){console.log(response)})},vm.editAdviceWeblink=function(data){vm.adviceWeblinksManager.editAdviceWeblink(data).then(function(response){vm.weblinkFormDisplay=!1,vm.newAdviceWeblinkData=angular.copy(vm.defaultAdviceWeblinkData),vm.adviceWeblinksCopy=angular.copy(vm.adviceWeblinksManager.adviceWeblinks)},function(response){console.log(response)})},vm.editAdviceWeblinkSections={details:function(adviceWeblinkId,detail){var adviceWeblinkData={adviceWeblinkId:adviceWeblinkId,title:detail.title,description:detail.description};vm.editAdviceWeblink(adviceWeblinkData)}},vm.cancelAdviceWeblink=function(form){vm.weblinkFormDisplay=!1,vm.newAdviceWeblinkData=angular.copy(vm.defaultAdviceWeblinkData),form&&(form.$setPristine(),form.$setUntouched())},vm.revertAdviceWeblink=function(adviceWeblink,adviceWeblinkCopy){adviceWeblink=adviceWeblinkCopy},vm.editedWeblink=null,$scope.$watch(angular.bind(this,function(){return vm.adviceWeblinks}),function(){vm.doneCount=vm.adviceWeblinksManager.adviceWeblinks.length-vm.remainingCount,vm.allChecked=!vm.remainingCount},!0),vm.editWeblink=function(adviceWeblink){vm.editedWeblink=adviceWeblink,vm.originalWeblink=angular.copy(adviceWeblink)},vm.doneEditing=function(adviceWeblink){vm.editedWeblink=null,adviceWeblink.title=adviceWeblink.title.trim(),adviceWeblink.title||vm.removeWeblink(adviceWeblink)},vm.openAdviceWeblink=function(adviceWeblink){var modalInstance=$uibModal.open({animation:!0,templateUrl:"advice-weblink-modal.html",controller:"AdviceWeblinkCtrl as adviceWeblinkCtrl",backdrop:"static",size:"xl",resolve:{adviceWeblinkData:function(){return adviceWeblink}}});modalInstance.result.then(function(selectedItem){$scope.selected=selectedItem},function(){$log.info("Modal dismissed at: "+new Date)})},vm.adviceWeblinksManager.getAdviceWeblinks(vm.adviceId)};adviceWeblinksCtrl.$inject=["AdviceWeblinksManager","$scope","$state","$stateParams","$http","$rootScope","$location","$uibModal","$log","$filter"],angular.module("app.advice").controller("AdviceWeblinksCtrl",adviceWeblinksCtrl);