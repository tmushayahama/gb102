var projectTimelinesCtrl=function(ProjectTimelinesManager,$scope,$state,$stateParams,$http,$rootScope,$location,$uibModal,$log,$filter){var vm=this;vm.projectId=$stateParams.projectId,vm.projectTimelinesCopy,vm.projectTimelinesManager=new ProjectTimelinesManager,vm.timelineFormDisplay=!1,vm.defaultProjectTimelineData={projectId:$stateParams.projectId,privacy:0},vm.newProjectTimelineData=angular.copy(vm.defaultProjectTimelineData),vm.showTimelineForm=function(){vm.timelineFormDisplay=!0},vm.createProjectTimeline=function(data){vm.projectTimelinesManager.createProjectTimeline(data).then(function(response){vm.timelineFormDisplay=!1,vm.newProjectTimelineData=angular.copy(vm.defaultProjectTimelineData),vm.projectTimelinesCopy=angular.copy(vm.projectTimelinesManager.projectTimelines)},function(response){console.log(response)})},vm.editProjectTimeline=function(data){vm.projectTimelinesManager.editProjectTimeline(data).then(function(response){vm.timelineFormDisplay=!1,vm.newProjectTimelineData=angular.copy(vm.defaultProjectTimelineData),vm.projectTimelinesCopy=angular.copy(vm.projectTimelinesManager.projectTimelines)},function(response){console.log(response)})},vm.editProjectTimelineSections={details:function(projectTimelineId,detail){var projectTimelineData={projectTimelineId:projectTimelineId,title:detail.title,description:detail.description};vm.editProjectTimeline(projectTimelineData)}},vm.cancelProjectTimeline=function(form){vm.timelineFormDisplay=!1,vm.newProjectTimelineData=angular.copy(vm.defaultProjectTimelineData),form&&(form.$setPristine(),form.$setUntouched())},vm.revertProjectTimeline=function(projectTimeline,projectTimelineCopy){projectTimeline=projectTimelineCopy},vm.editedTimeline=null,$scope.$watch(angular.bind(this,function(){return vm.projectTimelines}),function(){vm.doneCount=vm.projectTimelinesManager.projectTimelines.length-vm.remainingCount,vm.allChecked=!vm.remainingCount},!0),vm.editTimeline=function(projectTimeline){vm.editedTimeline=projectTimeline,vm.originalTimeline=angular.copy(projectTimeline)},vm.doneEditing=function(projectTimeline){vm.editedTimeline=null,projectTimeline.title=projectTimeline.title.trim(),projectTimeline.title||vm.removeTimeline(projectTimeline)},vm.openProjectTimeline=function(projectTimeline){var modalInstance=$uibModal.open({animation:!0,templateUrl:"project-timeline-modal.html",controller:"ProjectTimelineCtrl as projectTimelineCtrl",backdrop:"static",size:"xl",resolve:{projectTimelineData:function(){return projectTimeline}}});modalInstance.result.then(function(selectedItem){$scope.selected=selectedItem},function(){$log.info("Modal dismissed at: "+new Date)})},vm.projectTimelinesManager.getProjectTimelines(vm.projectId)};projectTimelinesCtrl.$inject=["ProjectTimelinesManager","$scope","$state","$stateParams","$http","$rootScope","$location","$uibModal","$log","$filter"],angular.module("app.project").controller("ProjectTimelinesCtrl",projectTimelinesCtrl);