var collaborationNotesCtrl=function(CollaborationNotesManager,$scope,$state,$stateParams,$http,$rootScope,$location,$uibModal,$log,$filter){var vm=this;vm.collaborationId=$stateParams.collaborationId,vm.collaborationNotesCopy,vm.collaborationNotesManager=new CollaborationNotesManager,vm.noteFormDisplay=!1,vm.defaultCollaborationNoteData={collaborationId:$stateParams.collaborationId,privacy:0},vm.newCollaborationNoteData=angular.copy(vm.defaultCollaborationNoteData),vm.showNoteForm=function(){vm.noteFormDisplay=!0},vm.createCollaborationNote=function(data){vm.collaborationNotesManager.createCollaborationNote(data).then(function(response){vm.noteFormDisplay=!1,vm.newCollaborationNoteData=angular.copy(vm.defaultCollaborationNoteData),vm.collaborationNotesCopy=angular.copy(vm.collaborationNotesManager.collaborationNotes)},function(response){console.log(response)})},vm.editCollaborationNote=function(data){vm.collaborationNotesManager.editCollaborationNote(data).then(function(response){vm.noteFormDisplay=!1,vm.newCollaborationNoteData=angular.copy(vm.defaultCollaborationNoteData),vm.collaborationNotesCopy=angular.copy(vm.collaborationNotesManager.collaborationNotes)},function(response){console.log(response)})},vm.editCollaborationNoteSections={details:function(collaborationNoteId,detail){var collaborationNoteData={collaborationNoteId:collaborationNoteId,title:detail.title,description:detail.description};vm.editCollaborationNote(collaborationNoteData)}},vm.cancelCollaborationNote=function(form){vm.noteFormDisplay=!1,vm.newCollaborationNoteData=angular.copy(vm.defaultCollaborationNoteData),form&&(form.$setPristine(),form.$setUntouched())},vm.revertCollaborationNote=function(collaborationNote,collaborationNoteCopy){collaborationNote=collaborationNoteCopy},vm.editedNote=null,$scope.$watch(angular.bind(this,function(){return vm.collaborationNotes}),function(){vm.doneCount=vm.collaborationNotesManager.collaborationNotes.length-vm.remainingCount,vm.allChecked=!vm.remainingCount},!0),vm.editNote=function(collaborationNote){vm.editedNote=collaborationNote,vm.originalNote=angular.copy(collaborationNote)},vm.doneEditing=function(collaborationNote){vm.editedNote=null,collaborationNote.title=collaborationNote.title.trim(),collaborationNote.title||vm.removeNote(collaborationNote)},vm.openCollaborationNote=function(collaborationNote){var modalInstance=$uibModal.open({animation:!0,templateUrl:"collaboration-note-modal.html",controller:"CollaborationNoteCtrl as collaborationNoteCtrl",backdrop:"static",size:"xl",resolve:{collaborationNoteData:function(){return collaborationNote}}});modalInstance.result.then(function(selectedItem){$scope.selected=selectedItem},function(){$log.info("Modal dismissed at: "+new Date)})},vm.collaborationNotesManager.getCollaborationNotes(vm.collaborationId)};collaborationNotesCtrl.$inject=["CollaborationNotesManager","$scope","$state","$stateParams","$http","$rootScope","$location","$uibModal","$log","$filter"],angular.module("app.collaboration").controller("CollaborationNotesCtrl",collaborationNotesCtrl);