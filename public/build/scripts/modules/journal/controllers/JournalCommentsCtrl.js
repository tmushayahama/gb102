var journalCommentsCtrl=function(JournalCommentsManager,$scope,$state,$stateParams,$http,$rootScope,$location,$uibModal,$log,$filter){var vm=this;vm.journalId=$stateParams.journalId,vm.journalCommentsCopy,vm.journalCommentsManager=new JournalCommentsManager,vm.commentFormDisplay=!1,vm.defaultJournalCommentData={journalId:$stateParams.journalId,privacy:0},vm.newJournalCommentData=angular.copy(vm.defaultJournalCommentData),vm.showCommentForm=function(){vm.commentFormDisplay=!0},vm.createJournalComment=function(data){vm.journalCommentsManager.createJournalComment(data).then(function(response){vm.commentFormDisplay=!1,vm.newJournalCommentData=angular.copy(vm.defaultJournalCommentData),vm.journalCommentsCopy=angular.copy(vm.journalCommentsManager.journalComments)},function(response){console.log(response)})},vm.editJournalComment=function(data){vm.journalCommentsManager.editJournalComment(data).then(function(response){vm.commentFormDisplay=!1,vm.newJournalCommentData=angular.copy(vm.defaultJournalCommentData),vm.journalCommentsCopy=angular.copy(vm.journalCommentsManager.journalComments)},function(response){console.log(response)})},vm.editJournalCommentSections={details:function(journalCommentId,detail){var journalCommentData={journalCommentId:journalCommentId,title:detail.title,description:detail.description};vm.editJournalComment(journalCommentData)}},vm.cancelJournalComment=function(form){vm.commentFormDisplay=!1,vm.newJournalCommentData=angular.copy(vm.defaultJournalCommentData),form&&(form.$setPristine(),form.$setUntouched())},vm.revertJournalComment=function(journalComment,journalCommentCopy){journalComment=journalCommentCopy},vm.editedComment=null,$scope.$watch(angular.bind(this,function(){return vm.journalComments}),function(){vm.doneCount=vm.journalCommentsManager.journalComments.length-vm.remainingCount,vm.allChecked=!vm.remainingCount},!0),vm.editComment=function(journalComment){vm.editedComment=journalComment,vm.originalComment=angular.copy(journalComment)},vm.doneEditing=function(journalComment){vm.editedComment=null,journalComment.title=journalComment.title.trim(),journalComment.title||vm.removeComment(journalComment)},vm.openJournalComment=function(journalComment){var modalInstance=$uibModal.open({animation:!0,templateUrl:"journal-comment-modal.html",controller:"JournalCommentCtrl as journalCommentCtrl",backdrop:"static",size:"xl",resolve:{journalCommentData:function(){return journalComment}}});modalInstance.result.then(function(selectedItem){$scope.selected=selectedItem},function(){$log.info("Modal dismissed at: "+new Date)})},vm.journalCommentsManager.getJournalComments(vm.journalId)};journalCommentsCtrl.$inject=["JournalCommentsManager","$scope","$state","$stateParams","$http","$rootScope","$location","$uibModal","$log","$filter"],angular.module("app.journal").controller("JournalCommentsCtrl",journalCommentsCtrl);