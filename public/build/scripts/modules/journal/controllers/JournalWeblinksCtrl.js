var journalWeblinksCtrl=function(JournalWeblinksManager,$scope,$state,$stateParams,$http,$rootScope,$location,$uibModal,$log,$filter){var vm=this;vm.journalId=$stateParams.journalId,vm.journalWeblinksCopy,vm.journalWeblinksManager=new JournalWeblinksManager,vm.weblinkFormDisplay=!1,vm.defaultJournalWeblinkData={journalId:$stateParams.journalId,privacy:0},vm.newJournalWeblinkData=angular.copy(vm.defaultJournalWeblinkData),vm.showWeblinkForm=function(){vm.weblinkFormDisplay=!0},vm.createJournalWeblink=function(data){vm.journalWeblinksManager.createJournalWeblink(data).then(function(response){vm.weblinkFormDisplay=!1,vm.newJournalWeblinkData=angular.copy(vm.defaultJournalWeblinkData),vm.journalWeblinksCopy=angular.copy(vm.journalWeblinksManager.journalWeblinks)},function(response){console.log(response)})},vm.editJournalWeblink=function(data){vm.journalWeblinksManager.editJournalWeblink(data).then(function(response){vm.weblinkFormDisplay=!1,vm.newJournalWeblinkData=angular.copy(vm.defaultJournalWeblinkData),vm.journalWeblinksCopy=angular.copy(vm.journalWeblinksManager.journalWeblinks)},function(response){console.log(response)})},vm.editJournalWeblinkSections={details:function(journalWeblinkId,detail){var journalWeblinkData={journalWeblinkId:journalWeblinkId,title:detail.title,description:detail.description};vm.editJournalWeblink(journalWeblinkData)}},vm.cancelJournalWeblink=function(form){vm.weblinkFormDisplay=!1,vm.newJournalWeblinkData=angular.copy(vm.defaultJournalWeblinkData),form&&(form.$setPristine(),form.$setUntouched())},vm.revertJournalWeblink=function(journalWeblink,journalWeblinkCopy){journalWeblink=journalWeblinkCopy},vm.editedWeblink=null,$scope.$watch(angular.bind(this,function(){return vm.journalWeblinks}),function(){vm.doneCount=vm.journalWeblinksManager.journalWeblinks.length-vm.remainingCount,vm.allChecked=!vm.remainingCount},!0),vm.editWeblink=function(journalWeblink){vm.editedWeblink=journalWeblink,vm.originalWeblink=angular.copy(journalWeblink)},vm.doneEditing=function(journalWeblink){vm.editedWeblink=null,journalWeblink.title=journalWeblink.title.trim(),journalWeblink.title||vm.removeWeblink(journalWeblink)},vm.openJournalWeblink=function(journalWeblink){var modalInstance=$uibModal.open({animation:!0,templateUrl:"journal-weblink-modal.html",controller:"JournalWeblinkCtrl as journalWeblinkCtrl",backdrop:"static",size:"xl",resolve:{journalWeblinkData:function(){return journalWeblink}}});modalInstance.result.then(function(selectedItem){$scope.selected=selectedItem},function(){$log.info("Modal dismissed at: "+new Date)})},vm.journalWeblinksManager.getJournalWeblinks(vm.journalId)};journalWeblinksCtrl.$inject=["JournalWeblinksManager","$scope","$state","$stateParams","$http","$rootScope","$location","$uibModal","$log","$filter"],angular.module("app.journal").controller("JournalWeblinksCtrl",journalWeblinksCtrl);