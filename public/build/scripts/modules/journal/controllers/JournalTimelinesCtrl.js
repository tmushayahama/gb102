var journalTimelinesCtrl=function(JournalTimelinesManager,$scope,$state,$stateParams,$http,$rootScope,$location,$uibModal,$log,$filter){var vm=this;vm.journalId=$stateParams.journalId,vm.journalTimelinesCopy,vm.journalTimelinesManager=new JournalTimelinesManager,vm.timelineFormDisplay=!1,vm.defaultJournalTimelineData={journalId:$stateParams.journalId,privacy:0},vm.newJournalTimelineData=angular.copy(vm.defaultJournalTimelineData),vm.showTimelineForm=function(){vm.timelineFormDisplay=!0},vm.createJournalTimeline=function(data){vm.journalTimelinesManager.createJournalTimeline(data).then(function(response){vm.timelineFormDisplay=!1,vm.newJournalTimelineData=angular.copy(vm.defaultJournalTimelineData),vm.journalTimelinesCopy=angular.copy(vm.journalTimelinesManager.journalTimelines)},function(response){console.log(response)})},vm.editJournalTimeline=function(data){vm.journalTimelinesManager.editJournalTimeline(data).then(function(response){vm.timelineFormDisplay=!1,vm.newJournalTimelineData=angular.copy(vm.defaultJournalTimelineData),vm.journalTimelinesCopy=angular.copy(vm.journalTimelinesManager.journalTimelines)},function(response){console.log(response)})},vm.editJournalTimelineSections={details:function(journalTimelineId,detail){var journalTimelineData={journalTimelineId:journalTimelineId,title:detail.title,description:detail.description};vm.editJournalTimeline(journalTimelineData)}},vm.cancelJournalTimeline=function(form){vm.timelineFormDisplay=!1,vm.newJournalTimelineData=angular.copy(vm.defaultJournalTimelineData),form&&(form.$setPristine(),form.$setUntouched())},vm.revertJournalTimeline=function(journalTimeline,journalTimelineCopy){journalTimeline=journalTimelineCopy},vm.editedTimeline=null,$scope.$watch(angular.bind(this,function(){return vm.journalTimelines}),function(){vm.doneCount=vm.journalTimelinesManager.journalTimelines.length-vm.remainingCount,vm.allChecked=!vm.remainingCount},!0),vm.editTimeline=function(journalTimeline){vm.editedTimeline=journalTimeline,vm.originalTimeline=angular.copy(journalTimeline)},vm.doneEditing=function(journalTimeline){vm.editedTimeline=null,journalTimeline.title=journalTimeline.title.trim(),journalTimeline.title||vm.removeTimeline(journalTimeline)},vm.openJournalTimeline=function(journalTimeline){var modalInstance=$uibModal.open({animation:!0,templateUrl:"journal-timeline-modal.html",controller:"JournalTimelineCtrl as journalTimelineCtrl",backdrop:"static",size:"xl",resolve:{journalTimelineData:function(){return journalTimeline}}});modalInstance.result.then(function(selectedItem){$scope.selected=selectedItem},function(){$log.info("Modal dismissed at: "+new Date)})},vm.journalTimelinesManager.getJournalTimelines(vm.journalId)};journalTimelinesCtrl.$inject=["JournalTimelinesManager","$scope","$state","$stateParams","$http","$rootScope","$location","$uibModal","$log","$filter"],angular.module("app.journal").controller("JournalTimelinesCtrl",journalTimelinesCtrl);