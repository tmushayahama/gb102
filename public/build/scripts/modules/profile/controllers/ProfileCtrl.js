var profileCtrl=function(_,ConstantsManager,ProfileManager,UserProfileSectionManager,$scope,$state,$stateParams,$http,$rootScope,$location,$uibModal,$log,$filter,$css){var vm=this;$css.bind({href:"public/build/css/gb-sass/stylesheets/gb-themes/app-theme-profile.css"},$scope),vm.profile=[];vm.range=function(min,max){return _.range(min,max)},vm.profileIcons=[],vm.profileIconsArray=[];var getRand=function(min,max){return Math.floor(Math.random()*max+min)};vm.getRandomProfileIcons=function(){for(var i=0;5>i;i++){for(var rowArray=[],j=0;j<vm.profileIcons.length;j++){var rand=getRand(0,vm.profileIcons.length);rowArray.push(vm.profileIcons[rand].name)}vm.profileIconsArray.push(rowArray)}},vm.profileId=$stateParams.profileId,vm.profileManager=new ProfileManager,vm.userProfileSectionManager=new UserProfileSectionManager,vm.constantsManager=new ConstantsManager,vm.profileFormDisplay=!1,vm.getProfile=function(id,data){vm.profileManager.getProfile(id,data).success(function(response){vm.profile=response}).error(function(response){console.log(response)})},vm.defaultProfileData={profileId:$stateParams.profileId,privacy:0},vm.newProfileData=angular.copy(vm.defaultProfileData),vm.showForm=function(){vm.FormDisplay=!0},vm.createProfile=function(data){vm.profileManager.createProfile(data).then(function(response){vm.FormDisplay=!1,vm.newProfileData=angular.copy(vm.defaultProfileData),vm.profileCopy=angular.copy(vm.profileManager.profile)},function(response){console.log(response)})},vm.editProfile=function(data){vm.profileManager.editProfile(data).then(function(response){vm.FormDisplay=!1,vm.newProfileData=angular.copy(vm.defaultProfileData),vm.profileCopy=angular.copy(vm.profileManager.profile)},function(response){console.log(response)})},vm.editProfileSections={details:function(profileId,detail){var profileData={profileId:profileId,title:detail.title,description:detail.description};vm.editProfile(profileData)}},vm.cancelProfile=function(form){vm.FormDisplay=!1,vm.newProfileData=angular.copy(vm.defaultProfileData),form&&(form.$setPristine(),form.$setUntouched())},vm.edit=function(profile){vm.edited=profile,vm.original=angular.copy(profile)},vm.doneEditing=function(profile){vm.edited=null,profile.title=profile.title.trim(),profile.title||vm.remove(profile)},vm.profileManager.getProfile(vm.profileId).then(function(data){vm.userProfileSectionManager.getUserProfileSection(vm.profileId)}),vm.constantsManager.getIcons(1).then(function(data){vm.profileIcons=data,vm.getRandomProfileIcons()})};profileCtrl.$inject=["_","ConstantsManager","ProfileManager","UserProfileSectionManager","$scope","$state","$stateParams","$http","$rootScope","$location","$uibModal","$log","$filter","$css"],angular.module("app.profile").controller("ProfileCtrl",profileCtrl);