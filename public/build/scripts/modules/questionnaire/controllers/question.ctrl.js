var questionCtrl=function(_,ConstantsSrv,QuestionSrv,$scope,$state,$stateParams,$http,$rootScope,$location,$uibModal,$log,$filter,$css){var vm=this;$css.bind({href:"public/build/css/gb-sass/stylesheets/gb-themes/app-theme-questionnaire.css"},$scope),vm.question=[];vm.range=function(min,max){return _.range(min,max)},vm.questionIcons=[],vm.questionIconsArray=[];var getRand=function(min,max){return Math.floor(Math.random()*max+min)};vm.getRandomQuestionIcons=function(){for(var i=0;5>i;i++){for(var rowArray=[],j=0;j<vm.questionIcons.length;j++){var rand=getRand(0,vm.questionIcons.length);rowArray.push(vm.questionIcons[rand].name)}vm.questionIconsArray.push(rowArray)}},vm.questionId=$stateParams.questionId,vm.questionSrv=new QuestionSrv,vm.constantsSrv=new ConstantsSrv,vm.questionFormDisplay=!1,vm.getQuestion=function(id,data){vm.questionSrv.getQuestion(id,data).success(function(response){vm.question=response}).error(function(response){console.log(response)})},vm.defaultQuestionData={questionId:$stateParams.questionId,privacy:0},vm.newQuestionData=angular.copy(vm.defaultQuestionData),vm.showForm=function(){vm.FormDisplay=!0},vm.createQuestion=function(data){vm.questionSrv.createQuestion(data).then(function(response){vm.FormDisplay=!1,vm.newQuestionData=angular.copy(vm.defaultQuestionData),vm.questionCopy=angular.copy(vm.questionSrv.question)},function(response){console.log(response)})},vm.editQuestion=function(data){vm.questionSrv.editQuestion(data).then(function(response){vm.FormDisplay=!1,vm.newQuestionData=angular.copy(vm.defaultQuestionData),vm.questionCopy=angular.copy(vm.questionSrv.question)},function(response){console.log(response)})},vm.editQuestionSections={details:function(questionId,detail){var questionData={questionId:questionId,title:detail.title,description:detail.description};vm.editQuestion(questionData)}},vm.cancelQuestion=function(form){vm.FormDisplay=!1,vm.newQuestionData=angular.copy(vm.defaultQuestionData),form&&(form.$setPristine(),form.$setUntouched())},vm.revertQuestion=function(question,questionCopy){question=questionCopy},vm.edited=null,$scope.$watch(angular.bind(this,function(){return vm.question}),function(){vm.doneCount=vm.questionSrv.question.length-vm.remainingCount,vm.allChecked=!vm.remainingCount},!0),vm.edit=function(question){vm.edited=question,vm.original=angular.copy(question)},vm.doneEditing=function(question){vm.edited=null,question.title=question.title.trim(),question.title||vm.remove(question)},vm.questionSrv.getQuestion(vm.questionId).then(function(data){}),vm.constantsSrv.getIcons(1).then(function(data){vm.questionIcons=data,vm.getRandomQuestionIcons()})};questionCtrl.$inject=["_","ConstantsSrv","QuestionSrv","$scope","$state","$stateParams","$http","$rootScope","$location","$uibModal","$log","$filter","$css"],angular.module("app.questionnaire").controller("QuestionCtrl",questionCtrl);