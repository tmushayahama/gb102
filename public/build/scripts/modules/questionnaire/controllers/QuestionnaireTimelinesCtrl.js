var questionnaireTimelinesCtrl=function(QuestionnaireTimelinesManager,$scope,$state,$stateParams,$http,$rootScope,$location,$uibModal,$log,$filter){var vm=this;vm.questionnaireId=$stateParams.questionnaireId,vm.questionnaireTimelinesCopy,vm.questionnaireTimelinesManager=new QuestionnaireTimelinesManager,vm.timelineFormDisplay=!1,vm.defaultQuestionnaireTimelineData={questionnaireId:$stateParams.questionnaireId,privacy:0},vm.newQuestionnaireTimelineData=angular.copy(vm.defaultQuestionnaireTimelineData),vm.showTimelineForm=function(){vm.timelineFormDisplay=!0},vm.createQuestionnaireTimeline=function(data){vm.questionnaireTimelinesManager.createQuestionnaireTimeline(data).then(function(response){vm.timelineFormDisplay=!1,vm.newQuestionnaireTimelineData=angular.copy(vm.defaultQuestionnaireTimelineData),vm.questionnaireTimelinesCopy=angular.copy(vm.questionnaireTimelinesManager.questionnaireTimelines)},function(response){console.log(response)})},vm.editQuestionnaireTimeline=function(data){vm.questionnaireTimelinesManager.editQuestionnaireTimeline(data).then(function(response){vm.timelineFormDisplay=!1,vm.newQuestionnaireTimelineData=angular.copy(vm.defaultQuestionnaireTimelineData),vm.questionnaireTimelinesCopy=angular.copy(vm.questionnaireTimelinesManager.questionnaireTimelines)},function(response){console.log(response)})},vm.editQuestionnaireTimelineSections={details:function(questionnaireTimelineId,detail){var questionnaireTimelineData={questionnaireTimelineId:questionnaireTimelineId,title:detail.title,description:detail.description};vm.editQuestionnaireTimeline(questionnaireTimelineData)}},vm.cancelQuestionnaireTimeline=function(form){vm.timelineFormDisplay=!1,vm.newQuestionnaireTimelineData=angular.copy(vm.defaultQuestionnaireTimelineData),form&&(form.$setPristine(),form.$setUntouched())},vm.revertQuestionnaireTimeline=function(questionnaireTimeline,questionnaireTimelineCopy){questionnaireTimeline=questionnaireTimelineCopy},vm.editedTimeline=null,$scope.$watch(angular.bind(this,function(){return vm.questionnaireTimelines}),function(){vm.doneCount=vm.questionnaireTimelinesManager.questionnaireTimelines.length-vm.remainingCount,vm.allChecked=!vm.remainingCount},!0),vm.editTimeline=function(questionnaireTimeline){vm.editedTimeline=questionnaireTimeline,vm.originalTimeline=angular.copy(questionnaireTimeline)},vm.doneEditing=function(questionnaireTimeline){vm.editedTimeline=null,questionnaireTimeline.title=questionnaireTimeline.title.trim(),questionnaireTimeline.title||vm.removeTimeline(questionnaireTimeline)},vm.openQuestionnaireTimeline=function(questionnaireTimeline){var modalInstance=$uibModal.open({animation:!0,templateUrl:"questionnaire-timeline-modal.html",controller:"QuestionnaireTimelineCtrl as questionnaireTimelineCtrl",backdrop:"static",size:"xl",resolve:{questionnaireTimelineData:function(){return questionnaireTimeline}}});modalInstance.result.then(function(selectedItem){$scope.selected=selectedItem},function(){$log.info("Modal dismissed at: "+new Date)})},vm.questionnaireTimelinesManager.getQuestionnaireTimelines(vm.questionnaireId)};questionnaireTimelinesCtrl.$inject=["QuestionnaireTimelinesManager","$scope","$state","$stateParams","$http","$rootScope","$location","$uibModal","$log","$filter"],angular.module("app.questionnaire").controller("QuestionnaireTimelinesCtrl",questionnaireTimelinesCtrl);