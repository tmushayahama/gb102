var questionnaireWeblinksCtrl=function(QuestionnaireWeblinksManager,$scope,$state,$stateParams,$http,$rootScope,$location,$uibModal,$log,$filter){var vm=this;vm.questionnaireId=$stateParams.questionnaireId,vm.questionnaireWeblinksCopy,vm.questionnaireWeblinksManager=new QuestionnaireWeblinksManager,vm.weblinkFormDisplay=!1,vm.defaultQuestionnaireWeblinkData={questionnaireId:$stateParams.questionnaireId,privacy:0},vm.newQuestionnaireWeblinkData=angular.copy(vm.defaultQuestionnaireWeblinkData),vm.showWeblinkForm=function(){vm.weblinkFormDisplay=!0},vm.createQuestionnaireWeblink=function(data){vm.questionnaireWeblinksManager.createQuestionnaireWeblink(data).then(function(response){vm.weblinkFormDisplay=!1,vm.newQuestionnaireWeblinkData=angular.copy(vm.defaultQuestionnaireWeblinkData),vm.questionnaireWeblinksCopy=angular.copy(vm.questionnaireWeblinksManager.questionnaireWeblinks)},function(response){console.log(response)})},vm.editQuestionnaireWeblink=function(data){vm.questionnaireWeblinksManager.editQuestionnaireWeblink(data).then(function(response){vm.weblinkFormDisplay=!1,vm.newQuestionnaireWeblinkData=angular.copy(vm.defaultQuestionnaireWeblinkData),vm.questionnaireWeblinksCopy=angular.copy(vm.questionnaireWeblinksManager.questionnaireWeblinks)},function(response){console.log(response)})},vm.editQuestionnaireWeblinkSections={details:function(questionnaireWeblinkId,detail){var questionnaireWeblinkData={questionnaireWeblinkId:questionnaireWeblinkId,title:detail.title,description:detail.description};vm.editQuestionnaireWeblink(questionnaireWeblinkData)}},vm.cancelQuestionnaireWeblink=function(form){vm.weblinkFormDisplay=!1,vm.newQuestionnaireWeblinkData=angular.copy(vm.defaultQuestionnaireWeblinkData),form&&(form.$setPristine(),form.$setUntouched())},vm.revertQuestionnaireWeblink=function(questionnaireWeblink,questionnaireWeblinkCopy){questionnaireWeblink=questionnaireWeblinkCopy},vm.editedWeblink=null,$scope.$watch(angular.bind(this,function(){return vm.questionnaireWeblinks}),function(){vm.doneCount=vm.questionnaireWeblinksManager.questionnaireWeblinks.length-vm.remainingCount,vm.allChecked=!vm.remainingCount},!0),vm.editWeblink=function(questionnaireWeblink){vm.editedWeblink=questionnaireWeblink,vm.originalWeblink=angular.copy(questionnaireWeblink)},vm.doneEditing=function(questionnaireWeblink){vm.editedWeblink=null,questionnaireWeblink.title=questionnaireWeblink.title.trim(),questionnaireWeblink.title||vm.removeWeblink(questionnaireWeblink)},vm.openQuestionnaireWeblink=function(questionnaireWeblink){var modalInstance=$uibModal.open({animation:!0,templateUrl:"questionnaire-weblink-modal.html",controller:"QuestionnaireWeblinkCtrl as questionnaireWeblinkCtrl",backdrop:"static",size:"xl",resolve:{questionnaireWeblinkData:function(){return questionnaireWeblink}}});modalInstance.result.then(function(selectedItem){$scope.selected=selectedItem},function(){$log.info("Modal dismissed at: "+new Date)})},vm.questionnaireWeblinksManager.getQuestionnaireWeblinks(vm.questionnaireId)};questionnaireWeblinksCtrl.$inject=["QuestionnaireWeblinksManager","$scope","$state","$stateParams","$http","$rootScope","$location","$uibModal","$log","$filter"],angular.module("app.questionnaire").controller("QuestionnaireWeblinksCtrl",questionnaireWeblinksCtrl);