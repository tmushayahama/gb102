var questionnaireCtrl=function(_,ConstantsManager,QuestionnaireManager,$scope,$state,$stateParams,$http,$rootScope,$location,$uibModal,$log,$filter,$css){var vm=this;$css.bind({href:"public/build/css/gb-sass/stylesheets/gb-themes/app-theme-questionnaire.css"},$scope),vm.questionnaire=[];vm.range=function(min,max){return _.range(min,max)},vm.questionnaireIcons=[],vm.questionnaireIconsArray=[];var getRand=function(min,max){return Math.floor(Math.random()*max+min)};vm.getRandomQuestionnaireIcons=function(){for(var i=0;5>i;i++){for(var rowArray=[],j=0;j<vm.questionnaireIcons.length;j++){var rand=getRand(0,vm.questionnaireIcons.length);rowArray.push(vm.questionnaireIcons[rand].name)}vm.questionnaireIconsArray.push(rowArray)}},vm.questionnaireId=$stateParams.questionnaireId,vm.questionnaireManager=new QuestionnaireManager,vm.constantsManager=new ConstantsManager,vm.questionnaireFormDisplay=!1,vm.getQuestionnaire=function(id,data){vm.questionnaireManager.getQuestionnaire(id,data).success(function(response){vm.questionnaire=response}).error(function(response){console.log(response)})},vm.defaultQuestionnaireData={questionnaireId:$stateParams.questionnaireId,privacy:0},vm.newQuestionnaireData=angular.copy(vm.defaultQuestionnaireData),vm.showForm=function(){vm.FormDisplay=!0},vm.createQuestionnaire=function(data){vm.questionnaireManager.createQuestionnaire(data).then(function(response){vm.FormDisplay=!1,vm.newQuestionnaireData=angular.copy(vm.defaultQuestionnaireData),vm.questionnaireCopy=angular.copy(vm.questionnaireManager.questionnaire)},function(response){console.log(response)})},vm.editQuestionnaire=function(data){vm.questionnaireManager.editQuestionnaire(data).then(function(response){vm.FormDisplay=!1,vm.newQuestionnaireData=angular.copy(vm.defaultQuestionnaireData),vm.questionnaireCopy=angular.copy(vm.questionnaireManager.questionnaire)},function(response){console.log(response)})},vm.editQuestionnaireSections={details:function(questionnaireId,detail){var questionnaireData={questionnaireId:questionnaireId,title:detail.title,description:detail.description};vm.editQuestionnaire(questionnaireData)}},vm.cancelQuestionnaire=function(form){vm.FormDisplay=!1,vm.newQuestionnaireData=angular.copy(vm.defaultQuestionnaireData),form&&(form.$setPristine(),form.$setUntouched())},vm.revertQuestionnaire=function(questionnaire,questionnaireCopy){questionnaire=questionnaireCopy},vm.edited=null,$scope.$watch(angular.bind(this,function(){return vm.questionnaire}),function(){vm.doneCount=vm.questionnaireManager.questionnaire.length-vm.remainingCount,vm.allChecked=!vm.remainingCount},!0),vm.edit=function(questionnaire){vm.edited=questionnaire,vm.original=angular.copy(questionnaire)},vm.doneEditing=function(questionnaire){vm.edited=null,questionnaire.title=questionnaire.title.trim(),questionnaire.title||vm.remove(questionnaire)},vm.questionnaireManager.getQuestionnaire(vm.questionnaireId),vm.constantsManager.getIcons(1).then(function(data){vm.questionnaireIcons=data,vm.getRandomQuestionnaireIcons()})};questionnaireCtrl.$inject=["_","ConstantsManager","QuestionnaireManager","$scope","$state","$stateParams","$http","$rootScope","$location","$uibModal","$log","$filter","$css"],angular.module("app.questionnaire").controller("QuestionnaireCtrl",questionnaireCtrl);