var explorerComponentsCtrl=function(ExplorerComponentsSrv,$scope,$state,$stateParams,$http,$rootScope,$location,$uibModal,$log,$filter){var vm=this;vm.explorerId=$stateParams.explorerId,vm.explorerComponents=[],vm.explorerComponentsCopy,vm.explorerComponentsSrv=new ExplorerComponentsSrv,vm.componentFormDisplay=!1,vm.defaultExplorerComponentData={explorerId:$stateParams.explorerId,privacy:0},vm.newExplorerComponentData=angular.copy(vm.defaultExplorerComponentData),vm.showComponentForm=function(){vm.componentFormDisplay=!0},vm.getExplorerComponents=function(explorerId){vm.explorerComponentsSrv.getExplorerComponents(explorerId).then(function(response){vm.explorerComponents=response,angular.forEach(response,function(step,key){vm.explorerComponentsSrv.getSubComponents(step.component.id).then(function(stepResponse){vm.explorerComponents[key].steps=stepResponse})})})},vm.createExplorerComponent=function(data){vm.explorerComponentsSrv.createExplorerComponent(data).then(function(response){vm.componentFormDisplay=!1,vm.newExplorerComponentData=angular.copy(vm.defaultExplorerComponentData),vm.explorerComponents.unshift(response)},function(response){console.log(response)})},vm.editExplorerComponent=function(data){vm.explorerComponentsSrv.editExplorerComponent(data).then(function(response){vm.componentFormDisplay=!1,vm.newExplorerComponentData=angular.copy(vm.defaultExplorerComponentData),vm.explorerComponentsCopy=angular.copy(vm.explorerComponents)},function(response){console.log(response)})},vm.editExplorerComponentSections={details:function(explorerComponentId,detail){var explorerComponentData={explorerComponentId:explorerComponentId,title:detail.title,description:detail.description};vm.editExplorerComponent(explorerComponentData)}},vm.cancelExplorerComponent=function(form){vm.componentFormDisplay=!1,vm.newExplorerComponentData=angular.copy(vm.defaultExplorerComponentData),form&&(form.$setPristine(),form.$setUntouched())},vm.editedComponent=null,$scope.$watch(angular.bind(this,function(){return vm.explorerComponents}),function(){vm.doneCount=vm.explorerComponents.length-vm.remainingCount,vm.allChecked=!vm.remainingCount},!0),vm.editComponent=function(explorerComponent){vm.editedComponent=explorerComponent,vm.originalComponent=angular.copy(explorerComponent)},vm.doneEditing=function(explorerComponent){vm.editedComponent=null,explorerComponent.title=explorerComponent.title.trim(),explorerComponent.title||vm.removeComponent(explorerComponent)},vm.openExplorerComponent=function(explorerComponent){var modalInstance=$uibModal.open({animation:!0,templateUrl:"explorer-component-modal.html",controller:"ExplorerComponentCtrl as explorerComponentCtrl",backdrop:"static",size:"xl",resolve:{explorerComponentData:function(){return explorerComponent}}});modalInstance.result.then(function(selectedItem){$scope.selected=selectedItem},function(){$log.info("Modal dismissed at: "+new Date)})},vm.getExplorerComponents(vm.explorerId)};explorerComponentsCtrl.$inject=["ExplorerComponentsSrv","$scope","$state","$stateParams","$http","$rootScope","$location","$uibModal","$log","$filter"],angular.module("app.explorer").controller("ExplorerComponentsCtrl",explorerComponentsCtrl);