var explorerContributionsCtrl=function(level_categories,ConstantsSrv,ContributionsSrv,$scope,$state,$stateParams,$http,$rootScope,$location,$uibModal,$log,$filter){var vm=this;vm.explorerId=$stateParams.explorerId,vm.explorerContributions,vm.explorerContributionTypes,vm.explorerContributionsCopy,vm.constantsSrv=new ConstantsSrv,vm.contributionsSrv=new ContributionsSrv,vm.contributionFormDisplay=!1,vm.defaultContributionData={explorerId:$stateParams.explorerId,privacy:0},vm.newContributionData=angular.copy(vm.defaultContributionData),vm.showContributionForm=function(){vm.contributionFormDisplay=!0},vm.createContribution=function(data){vm.contributionsSrv.createContribution(data).then(function(response){vm.contributionFormDisplay=!1,vm.newContributionData=angular.copy(vm.defaultContributionData),vm.explorerContributionsCopy=angular.copy(vm.contributionsSrv.explorerContributions)},function(response){console.log(response)})},vm.editContribution=function(data){vm.contributionsSrv.editContribution(data).then(function(response){vm.contributionFormDisplay=!1,vm.newContributionData=angular.copy(vm.defaultContributionData),vm.explorerContributionsCopy=angular.copy(vm.contributionsSrv.explorerContributions)},function(response){console.log(response)})},vm.editContributionSections={details:function(explorerContributionId,detail){var explorerContributionData={explorerContributionId:explorerContributionId,title:detail.title,description:detail.description};vm.editContribution(explorerContributionData)}},vm.cancelContribution=function(form){vm.contributionFormDisplay=!1,vm.newContributionData=angular.copy(vm.defaultContributionData),form&&(form.$setPristine(),form.$setUntouched())},vm.revertContribution=function(explorerContribution,explorerContributionCopy){explorerContribution=explorerContributionCopy},vm.editedContribution=null,$scope.$watch(angular.bind(this,function(){return vm.explorerContributions}),function(){vm.doneCount=vm.contributionsSrv.explorerContributions.length-vm.remainingCount,vm.allChecked=!vm.remainingCount},!0),vm.editContribution=function(explorerContribution){vm.editedContribution=explorerContribution,vm.originalContribution=angular.copy(explorerContribution)},vm.doneEditing=function(explorerContribution){vm.editedContribution=null,explorerContribution.title=explorerContribution.title.trim(),explorerContribution.title||vm.removeContribution(explorerContribution)},vm.prepareSelectUsers=function(contributionType){var modalInstance=$uibModal.open({animation:!0,templateUrl:"create-contribution-modal.html",controller:"CreateContributionCtrl as createContributionCtrl",backdrop:"static",size:"xl",resolve:{contributionType:function(){return contributionType}}});modalInstance.result.then(function(selectedItem){$scope.selected=selectedItem},function(){$log.info("Modal dismissed at: "+new Date)})},vm.openContribution=function(explorerContribution){var modalInstance=$uibModal.open({animation:!0,templateUrl:"contribution-modal.html",controller:"ContributionCtrl as explorerContributionCtrl",backdrop:"static",size:"xl",resolve:{explorerContributionData:function(){return explorerContribution}}});modalInstance.result.then(function(selectedItem){$scope.selected=selectedItem},function(){$log.info("Modal dismissed at: "+new Date)})},vm.constantsSrv.getSubLevels(level_categories.contribution_types).then(function(data){vm.explorerContributionTypes=data}),vm.contributionsSrv.getContributions(vm.explorerId).then(function(data){vm.explorerContributions=data})};explorerContributionsCtrl.$inject=["level_categories","ConstantsSrv","ContributionsSrv","$scope","$state","$stateParams","$http","$rootScope","$location","$uibModal","$log","$filter"],angular.module("app.explorer").controller("ContributionsCtrl",explorerContributionsCtrl);