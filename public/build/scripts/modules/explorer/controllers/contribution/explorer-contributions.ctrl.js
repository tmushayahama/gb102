var explorerContributionsCtrl=function(level_categories,ConstantsSrv,ExplorerContributionsSrv,$scope,$state,$stateParams,$http,$rootScope,$location,$uibModal,$log,$filter){var vm=this;vm.explorerId=$stateParams.explorerId,vm.explorerContributions,vm.explorerContributionTypes,vm.explorerContributionsCopy,vm.constantsSrv=new ConstantsSrv,vm.explorerContributionsSrv=new ExplorerContributionsSrv,vm.contributionFormDisplay=!1,vm.defaultExplorerContributionData={explorerId:$stateParams.explorerId,privacy:0},vm.newExplorerContributionData=angular.copy(vm.defaultExplorerContributionData),vm.showContributionForm=function(){vm.contributionFormDisplay=!0},vm.createExplorerContribution=function(data){vm.explorerContributionsSrv.createExplorerContribution(data).then(function(response){vm.contributionFormDisplay=!1,vm.newExplorerContributionData=angular.copy(vm.defaultExplorerContributionData),vm.explorerContributionsCopy=angular.copy(vm.explorerContributionsSrv.explorerContributions)},function(response){console.log(response)})},vm.editExplorerContribution=function(data){vm.explorerContributionsSrv.editExplorerContribution(data).then(function(response){vm.contributionFormDisplay=!1,vm.newExplorerContributionData=angular.copy(vm.defaultExplorerContributionData),vm.explorerContributionsCopy=angular.copy(vm.explorerContributionsSrv.explorerContributions)},function(response){console.log(response)})},vm.editExplorerContributionSections={details:function(explorerContributionId,detail){var explorerContributionData={explorerContributionId:explorerContributionId,title:detail.title,description:detail.description};vm.editExplorerContribution(explorerContributionData)}},vm.cancelExplorerContribution=function(form){vm.contributionFormDisplay=!1,vm.newExplorerContributionData=angular.copy(vm.defaultExplorerContributionData),form&&(form.$setPristine(),form.$setUntouched())},vm.revertExplorerContribution=function(explorerContribution,explorerContributionCopy){explorerContribution=explorerContributionCopy},vm.editedContribution=null,$scope.$watch(angular.bind(this,function(){return vm.explorerContributions}),function(){vm.doneCount=vm.explorerContributionsSrv.explorerContributions.length-vm.remainingCount,vm.allChecked=!vm.remainingCount},!0),vm.editContribution=function(explorerContribution){vm.editedContribution=explorerContribution,vm.originalContribution=angular.copy(explorerContribution)},vm.doneEditing=function(explorerContribution){vm.editedContribution=null,explorerContribution.title=explorerContribution.title.trim(),explorerContribution.title||vm.removeContribution(explorerContribution)},vm.prepareSelectUsers=function(contributionType){var modalInstance=$uibModal.open({animation:!0,templateUrl:"create-explorer-contribution-modal.html",controller:"CreateExplorerContributionCtrl as createExplorerContributionCtrl",backdrop:"static",size:"xl",resolve:{contributionType:function(){return contributionType}}});modalInstance.result.then(function(selectedItem){$scope.selected=selectedItem},function(){$log.info("Modal dismissed at: "+new Date)})},vm.openExplorerContribution=function(explorerContribution){var modalInstance=$uibModal.open({animation:!0,templateUrl:"explorer-contribution-modal.html",controller:"ExplorerContributionCtrl as explorerContributionCtrl",backdrop:"static",size:"xl",resolve:{explorerContributionData:function(){return explorerContribution}}});modalInstance.result.then(function(selectedItem){$scope.selected=selectedItem},function(){$log.info("Modal dismissed at: "+new Date)})},vm.constantsSrv.getLevel(level_categories.contribution_types).then(function(data){vm.explorerContributionTypes=data}),vm.explorerContributionsSrv.getExplorerContributions(vm.explorerId).then(function(data){vm.explorerContributions=data})};explorerContributionsCtrl.$inject=["level_categories","ConstantsSrv","ExplorerContributionsSrv","$scope","$state","$stateParams","$http","$rootScope","$location","$uibModal","$log","$filter"],angular.module("app.explorer").controller("ExplorerContributionsCtrl",explorerContributionsCtrl);