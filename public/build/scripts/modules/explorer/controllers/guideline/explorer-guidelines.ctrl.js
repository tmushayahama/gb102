var explorerGuidelinesCtrl=function(ExplorerGuidelinesSrv,$scope,$state,$stateParams,$http,$rootScope,$location,$uibModal,$log,$filter){var vm=this;vm.explorerId=$stateParams.explorerId,vm.explorerGuidelines=[],vm.explorerGuidelinesCopy,vm.explorerGuidelinesSrv=new ExplorerGuidelinesSrv,vm.guidelineFormDisplay=!1,vm.defaultExplorerGuidelineData={explorerId:$stateParams.explorerId,privacy:0},vm.newExplorerGuidelineData=angular.copy(vm.defaultExplorerGuidelineData),vm.showGuidelineForm=function(){vm.guidelineFormDisplay=!0},vm.getExplorerGuidelines=function(explorerId){vm.explorerGuidelinesSrv.getExplorerGuidelines(explorerId).then(function(response){vm.explorerGuidelines=response,angular.forEach(response,function(step,key){vm.explorerGuidelinesSrv.getSubGuidelines(step.guideline.id).then(function(stepResponse){vm.explorerGuidelines[key].steps=stepResponse})})})},vm.createExplorerGuideline=function(data){vm.explorerGuidelinesSrv.createExplorerGuideline(data).then(function(response){vm.guidelineFormDisplay=!1,vm.newExplorerGuidelineData=angular.copy(vm.defaultExplorerGuidelineData),vm.explorerGuidelinesCopy=angular.copy(vm.explorerGuidelines)},function(response){console.log(response)})},vm.editExplorerGuideline=function(data){vm.explorerGuidelinesSrv.editExplorerGuideline(data).then(function(response){vm.guidelineFormDisplay=!1,vm.newExplorerGuidelineData=angular.copy(vm.defaultExplorerGuidelineData),vm.explorerGuidelinesCopy=angular.copy(vm.explorerGuidelines)},function(response){console.log(response)})},vm.editExplorerGuidelineSections={details:function(explorerGuidelineId,detail){var explorerGuidelineData={explorerGuidelineId:explorerGuidelineId,title:detail.title,description:detail.description};vm.editExplorerGuideline(explorerGuidelineData)}},vm.cancelExplorerGuideline=function(form){vm.guidelineFormDisplay=!1,vm.newExplorerGuidelineData=angular.copy(vm.defaultExplorerGuidelineData),form&&(form.$setPristine(),form.$setUntouched())},vm.editedGuideline=null,$scope.$watch(angular.bind(this,function(){return vm.explorerGuidelines}),function(){vm.doneCount=vm.explorerGuidelines.length-vm.remainingCount,vm.allChecked=!vm.remainingCount},!0),vm.editGuideline=function(explorerGuideline){vm.editedGuideline=explorerGuideline,vm.originalGuideline=angular.copy(explorerGuideline)},vm.doneEditing=function(explorerGuideline){vm.editedGuideline=null,explorerGuideline.title=explorerGuideline.title.trim(),explorerGuideline.title||vm.removeGuideline(explorerGuideline)},vm.openExplorerGuideline=function(explorerGuideline){var modalInstance=$uibModal.open({animation:!0,templateUrl:"explorer-guideline-modal.html",controller:"ExplorerGuidelineCtrl as explorerGuidelineCtrl",backdrop:"static",size:"xl",resolve:{explorerGuidelineData:function(){return explorerGuideline}}});modalInstance.result.then(function(selectedItem){$scope.selected=selectedItem},function(){$log.info("Modal dismissed at: "+new Date)})},vm.getExplorerGuidelines(vm.explorerId)};explorerGuidelinesCtrl.$inject=["ExplorerGuidelinesSrv","$scope","$state","$stateParams","$http","$rootScope","$location","$uibModal","$log","$filter"],angular.module("app.explorer").controller("ExplorerGuidelinesCtrl",explorerGuidelinesCtrl);