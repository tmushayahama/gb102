var explorerCtrl=function(_,ConstantsSrv,ExplorerSrv,$scope,$state,$stateParams,$http,$rootScope,$location,$uibModal,$log,$filter,$css){var vm=this;$css.bind({href:"public/build/css/gb-sass/stylesheets/gb-themes/app-theme-explorer.css"},$scope),vm.explorer=[];vm.range=function(min,max){return _.range(min,max)},vm.explorerIcons=[],vm.explorerIconsArray=[];var getRand=function(min,max){return Math.floor(Math.random()*max+min)};vm.getRandomExplorerIcons=function(){for(var i=0;5>i;i++){for(var rowArray=[],j=0;j<vm.explorerIcons.length;j++){var rand=getRand(0,vm.explorerIcons.length);rowArray.push(vm.explorerIcons[rand].name)}vm.explorerIconsArray.push(rowArray)}},vm.explorerId=$stateParams.explorerId,vm.explorerSrv=new ExplorerSrv,vm.constantsSrv=new ConstantsSrv,vm.explorerFormDisplay=!1,vm.getExplorer=function(id,data){vm.explorerSrv.getExplorer(id,data).success(function(response){vm.explorer=response}).error(function(response){console.log(response)})},vm.defaultExplorerData={explorerId:$stateParams.explorerId,privacy:0},vm.newExplorerData=angular.copy(vm.defaultExplorerData),vm.showForm=function(){vm.FormDisplay=!0},vm.createExplorer=function(data){vm.explorerSrv.createExplorer(data).then(function(response){vm.FormDisplay=!1,vm.newExplorerData=angular.copy(vm.defaultExplorerData),vm.explorerCopy=angular.copy(vm.explorerSrv.explorer)},function(response){console.log(response)})},vm.editExplorer=function(data){vm.explorerSrv.editExplorer(data).then(function(response){vm.FormDisplay=!1,vm.newExplorerData=angular.copy(vm.defaultExplorerData),vm.explorerCopy=angular.copy(vm.explorerSrv.explorer)},function(response){console.log(response)})},vm.editExplorerSections={details:function(explorerId,detail){var explorerData={explorerId:explorerId,title:detail.title,description:detail.description};vm.editExplorer(explorerData)}},vm.cancelExplorer=function(form){vm.FormDisplay=!1,vm.newExplorerData=angular.copy(vm.defaultExplorerData),form&&(form.$setPristine(),form.$setUntouched())},vm.revertExplorer=function(explorer,explorerCopy){explorer=explorerCopy},vm.edited=null,$scope.$watch(angular.bind(this,function(){return vm.explorer}),function(){vm.doneCount=vm.explorerSrv.explorer.length-vm.remainingCount,vm.allChecked=!vm.remainingCount},!0),vm.edit=function(explorer){vm.edited=explorer,vm.original=angular.copy(explorer)},vm.doneEditing=function(explorer){vm.edited=null,explorer.title=explorer.title.trim(),explorer.title||vm.remove(explorer)},vm.explorerSrv.getExplorer(vm.explorerId).then(function(data){$css.bind({href:"public/build/css/gb-sass/stylesheets/gb-themes/app-theme-"+data.app_type.name.toLowerCase()+".css"},$scope)}),vm.getSubExplorersStats=function(explorerId){vm.explorerSrv.getSubExplorersStats(explorerId).then(function(data){vm.subExplorersStats=data})},vm.constantsSrv.getIcons(1).then(function(data){vm.explorerIcons=data,vm.getRandomExplorerIcons()}),vm.getSubExplorersStats(vm.explorerId)};explorerCtrl.$inject=["_","ConstantsSrv","ExplorerSrv","$scope","$state","$stateParams","$http","$rootScope","$location","$uibModal","$log","$filter","$css"],angular.module("app.explorer").controller("ExplorerCtrl",explorerCtrl);