var explorerTodosCtrl=function(level_categories,ExplorerTodosSrv,$scope,$state,$stateParams,$http,$rootScope,$location,$uibModal,$log){var vm=this;vm.explorerId=$stateParams.explorerId,vm.explorerTodos={},vm.explorerTodosSrv=new ExplorerTodosSrv,vm.todoFormDisplay=!1,vm.getExplorerTodoPercentage=function(explorerTodoId){return 100},vm.todoChecklistCount=function(todoId){vm.explorerTodosSrv.todoChecklistCount(todoId).then(function(data){return data})},vm.showTodoForm=function(todoId){vm.explorerTodosSrv.todoChecklistCount(vm.explorerId,level_categories.todo_level_normal).then(function(data){vm.explorerTodos=data})},vm.defaultExplorerTodoData={explorerId:$stateParams.explorerId,title:"",description:"",privacy:0},vm.newExplorerTodoData=angular.copy(vm.defaultExplorerTodoData),vm.showTodoForm=function(){vm.todoFormDisplay=!0},vm.createExplorerTodo=function(data){data.level_id=level_categories.todo_level_normal,data.status_id=level_categories.todo_status_in_progress,vm.explorerTodosSrv.createExplorerTodo(data).then(function(response){vm.todoFormDisplay=!1,vm.newExplorerTodoData=angular.copy(vm.defaultExplorerTodoData)},function(response){console.log(response)})},vm.editExplorerTodo=function(data){vm.explorerTodosSrv.editExplorerTodo(data).then(function(response){vm.editDecriptionMode=!1},function(response){console.log(response)})},vm.editExplorerTodoSections={details:function(explorerTodo){var explorerTodoData={explorerTodoId:explorerTodo.todo.id,title:explorerTodo.todo.title,description:explorerTodo.todo.description};vm.editExplorerTodo(explorerTodoData)}},vm.cancelExplorerTodo=function(form){vm.todoFormDisplay=!1,vm.newExplorerTodoData=angular.copy(vm.defaultExplorerTodoData),form&&(form.$setPristine(),form.$setUntouched())},vm.editedTodo=null,$scope.$watch(angular.bind(this,function(){return vm.explorerTodos}),function(){vm.doneCount=vm.explorerTodosSrv.explorerTodos.length-vm.remainingCount,vm.allChecked=!vm.remainingCount},!0),vm.editTodo=function(explorerTodo){vm.editedTodo=explorerTodo,vm.originalTodo=angular.copy(explorerTodo)},vm.doneEditing=function(explorerTodo){vm.editedTodo=null,explorerTodo.title=explorerTodo.title.trim(),explorerTodo.title||vm.removeTodo(explorerTodo)},vm.openExplorerTodo=function(explorerTodo){var modalInstance=$uibModal.open({animation:!0,templateUrl:"explorer-todo-modal.html",controller:"ExplorerTodoCtrl as explorerTodoCtrl",backdrop:"static",size:"xl",resolve:{explorerTodoData:function(){return explorerTodo}}});modalInstance.result.then(function(selectedItem){$scope.selected=selectedItem},function(){$log.info("Modal dismissed at: "+new Date)})},vm.explorerTodosSrv.getExplorerTodos(vm.explorerId,level_categories.todo_in_progress).then(function(data){vm.explorerTodos.inProgress=data}),vm.explorerTodosSrv.getExplorerTodos(vm.explorerId,level_categories.todo_done).then(function(data){vm.explorerTodos.done=data}),vm.explorerTodosSrv.getExplorerTodos(vm.explorerId,level_categories.todo_later).then(function(data){vm.explorerTodos.later=data})};explorerTodosCtrl.$inject=["level_categories","ExplorerTodosSrv","$scope","$state","$stateParams","$http","$rootScope","$location","$uibModal","$log"],angular.module("app.explorer").controller("ExplorerTodosCtrl",explorerTodosCtrl);