var sticky=function($window){return{link:function(scope,element,attrs){var $win=angular.element($window);if(void 0===scope._stickyElements){scope._stickyElements=[],$win.bind("scroll.sticky",function(e){for(var pos=$win.scrollTop(),i=0;i<scope._stickyElements.length;i++){var item=scope._stickyElements[i];!item.isStuck&&pos>item.start?(item.element.addClass("stuck"),item.isStuck=!0,item.placeholder&&(item.placeholder=angular.element("<div></div>").css({height:item.element.outerHeight()+"px"}).insertBefore(item.element))):item.isStuck&&pos<item.start&&(item.element.removeClass("stuck"),item.isStuck=!1,item.placeholder&&(item.placeholder.remove(),item.placeholder=!0))}});var recheckPositions=function(){for(var i=0;i<scope._stickyElements.length;i++){var item=scope._stickyElements[i];item.isStuck?item.placeholder&&(item.start=item.placeholder.offset().top):item.start=item.element.offset().top}};$win.bind("load",recheckPositions),$win.bind("resize",recheckPositions)}var item={element:element,isStuck:!1,placeholder:void 0!==attrs.usePlaceholder,start:element.offset().top};scope._stickyElements.push(item)}}};angular.module("app").directive("sticky",sticky);