var communityTimelinesCtrl=function(CommunityTimelinesManager,$scope,$state,$stateParams,$http,$rootScope,$location,$uibModal,$log,$filter){var vm=this;vm.communityId=$stateParams.communityId,vm.communityTimelinesCopy,vm.communityTimelinesManager=new CommunityTimelinesManager,vm.timelineFormDisplay=!1,vm.defaultCommunityTimelineData={communityId:$stateParams.communityId,privacy:0},vm.newCommunityTimelineData=angular.copy(vm.defaultCommunityTimelineData),vm.showTimelineForm=function(){vm.timelineFormDisplay=!0},vm.createCommunityTimeline=function(data){vm.communityTimelinesManager.createCommunityTimeline(data).then(function(response){vm.timelineFormDisplay=!1,vm.newCommunityTimelineData=angular.copy(vm.defaultCommunityTimelineData),vm.communityTimelinesCopy=angular.copy(vm.communityTimelinesManager.communityTimelines)},function(response){console.log(response)})},vm.editCommunityTimeline=function(data){vm.communityTimelinesManager.editCommunityTimeline(data).then(function(response){vm.timelineFormDisplay=!1,vm.newCommunityTimelineData=angular.copy(vm.defaultCommunityTimelineData),vm.communityTimelinesCopy=angular.copy(vm.communityTimelinesManager.communityTimelines)},function(response){console.log(response)})},vm.editCommunityTimelineSections={details:function(communityTimelineId,detail){var communityTimelineData={communityTimelineId:communityTimelineId,title:detail.title,description:detail.description};vm.editCommunityTimeline(communityTimelineData)}},vm.cancelCommunityTimeline=function(form){vm.timelineFormDisplay=!1,vm.newCommunityTimelineData=angular.copy(vm.defaultCommunityTimelineData),form&&(form.$setPristine(),form.$setUntouched())},vm.revertCommunityTimeline=function(communityTimeline,communityTimelineCopy){communityTimeline=communityTimelineCopy},vm.editedTimeline=null,$scope.$watch(angular.bind(this,function(){return vm.communityTimelines}),function(){vm.doneCount=vm.communityTimelinesManager.communityTimelines.length-vm.remainingCount,vm.allChecked=!vm.remainingCount},!0),vm.editTimeline=function(communityTimeline){vm.editedTimeline=communityTimeline,vm.originalTimeline=angular.copy(communityTimeline)},vm.doneEditing=function(communityTimeline){vm.editedTimeline=null,communityTimeline.title=communityTimeline.title.trim(),communityTimeline.title||vm.removeTimeline(communityTimeline)},vm.openCommunityTimeline=function(communityTimeline){var modalInstance=$uibModal.open({animation:!0,templateUrl:"community-timeline-modal.html",controller:"CommunityTimelineCtrl as communityTimelineCtrl",backdrop:"static",size:"xl",resolve:{communityTimelineData:function(){return communityTimeline}}});modalInstance.result.then(function(selectedItem){$scope.selected=selectedItem},function(){$log.info("Modal dismissed at: "+new Date)})},vm.communityTimelinesManager.getCommunityTimelines(vm.communityId)};communityTimelinesCtrl.$inject=["CommunityTimelinesManager","$scope","$state","$stateParams","$http","$rootScope","$location","$uibModal","$log","$filter"],angular.module("app.communitys").controller("CommunityTimelinesCtrl",communityTimelinesCtrl);