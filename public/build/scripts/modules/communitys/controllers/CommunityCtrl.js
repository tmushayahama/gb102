var communityCtrl=function(_,ConstantsManager,CommunityManager,$scope,$state,$stateParams,$http,$rootScope,$location,$uibModal,$log,$filter,$css){var vm=this;$css.bind({href:"public/build/css/gb-sass/stylesheets/gb-themes/app-theme-community.css"},$scope),vm.community=[];vm.range=function(min,max){return _.range(min,max)},vm.communityIcons=[],vm.communityIconsArray=[];var getRand=function(min,max){return Math.floor(Math.random()*max+min)};vm.getRandomCommunityIcons=function(){for(var i=0;5>i;i++){for(var rowArray=[],j=0;j<vm.communityIcons.length;j++){var rand=getRand(0,vm.communityIcons.length);rowArray.push(vm.communityIcons[rand].name)}vm.communityIconsArray.push(rowArray)}},vm.communityId=$stateParams.communityId,vm.communityManager=new CommunityManager,vm.constantsManager=new ConstantsManager,vm.communityFormDisplay=!1,vm.getCommunity=function(id,data){vm.communityManager.getCommunity(id,data).success(function(response){vm.community=response}).error(function(response){console.log(response)})},vm.defaultCommunityData={communityId:$stateParams.communityId,privacy:0},vm.newCommunityData=angular.copy(vm.defaultCommunityData),vm.showForm=function(){vm.FormDisplay=!0},vm.createCommunity=function(data){vm.communityManager.createCommunity(data).then(function(response){vm.FormDisplay=!1,vm.newCommunityData=angular.copy(vm.defaultCommunityData),vm.communityCopy=angular.copy(vm.communityManager.community)},function(response){console.log(response)})},vm.editCommunity=function(data){vm.communityManager.editCommunity(data).then(function(response){vm.FormDisplay=!1,vm.newCommunityData=angular.copy(vm.defaultCommunityData),vm.communityCopy=angular.copy(vm.communityManager.community)},function(response){console.log(response)})},vm.editCommunitySections={details:function(communityId,detail){var communityData={communityId:communityId,title:detail.title,description:detail.description};vm.editCommunity(communityData)}},vm.cancelCommunity=function(form){vm.FormDisplay=!1,vm.newCommunityData=angular.copy(vm.defaultCommunityData),form&&(form.$setPristine(),form.$setUntouched())},vm.revertCommunity=function(community,communityCopy){community=communityCopy},vm.edited=null,$scope.$watch(angular.bind(this,function(){return vm.community}),function(){vm.doneCount=vm.communityManager.community.length-vm.remainingCount,vm.allChecked=!vm.remainingCount},!0),vm.edit=function(community){vm.edited=community,vm.original=angular.copy(community)},vm.doneEditing=function(community){vm.edited=null,community.title=community.title.trim(),community.title||vm.remove(community)},vm.communityManager.getCommunity(vm.communityId),vm.constantsManager.getIcons(1).then(function(data){vm.communityIcons=data,vm.getRandomCommunityIcons()})};communityCtrl.$inject=["_","ConstantsManager","CommunityManager","$scope","$state","$stateParams","$http","$rootScope","$location","$uibModal","$log","$filter","$css"],angular.module("app.communitys").controller("CommunityCtrl",communityCtrl);