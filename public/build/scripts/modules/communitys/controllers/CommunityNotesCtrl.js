var communityNotesCtrl=function(CommunityNotesManager,$scope,$state,$stateParams,$http,$rootScope,$location,$uibModal,$log,$filter){var vm=this;vm.communityId=$stateParams.communityId,vm.communityNotesCopy,vm.communityNotesManager=new CommunityNotesManager,vm.noteFormDisplay=!1,vm.defaultCommunityNoteData={communityId:$stateParams.communityId,privacy:0},vm.newCommunityNoteData=angular.copy(vm.defaultCommunityNoteData),vm.showNoteForm=function(){vm.noteFormDisplay=!0},vm.createCommunityNote=function(data){vm.communityNotesManager.createCommunityNote(data).then(function(response){vm.noteFormDisplay=!1,vm.newCommunityNoteData=angular.copy(vm.defaultCommunityNoteData),vm.communityNotesCopy=angular.copy(vm.communityNotesManager.communityNotes)},function(response){console.log(response)})},vm.editCommunityNote=function(data){vm.communityNotesManager.editCommunityNote(data).then(function(response){vm.noteFormDisplay=!1,vm.newCommunityNoteData=angular.copy(vm.defaultCommunityNoteData),vm.communityNotesCopy=angular.copy(vm.communityNotesManager.communityNotes)},function(response){console.log(response)})},vm.editCommunityNoteSections={details:function(communityNoteId,detail){var communityNoteData={communityNoteId:communityNoteId,title:detail.title,description:detail.description};vm.editCommunityNote(communityNoteData)}},vm.cancelCommunityNote=function(form){vm.noteFormDisplay=!1,vm.newCommunityNoteData=angular.copy(vm.defaultCommunityNoteData),form&&(form.$setPristine(),form.$setUntouched())},vm.revertCommunityNote=function(communityNote,communityNoteCopy){communityNote=communityNoteCopy},vm.editedNote=null,$scope.$watch(angular.bind(this,function(){return vm.communityNotes}),function(){vm.doneCount=vm.communityNotesManager.communityNotes.length-vm.remainingCount,vm.allChecked=!vm.remainingCount},!0),vm.editNote=function(communityNote){vm.editedNote=communityNote,vm.originalNote=angular.copy(communityNote)},vm.doneEditing=function(communityNote){vm.editedNote=null,communityNote.title=communityNote.title.trim(),communityNote.title||vm.removeNote(communityNote)},vm.openCommunityNote=function(communityNote){var modalInstance=$uibModal.open({animation:!0,templateUrl:"community-note-modal.html",controller:"CommunityNoteCtrl as communityNoteCtrl",backdrop:"static",size:"xl",resolve:{communityNoteData:function(){return communityNote}}});modalInstance.result.then(function(selectedItem){$scope.selected=selectedItem},function(){$log.info("Modal dismissed at: "+new Date)})},vm.communityNotesManager.getCommunityNotes(vm.communityId)};communityNotesCtrl.$inject=["CommunityNotesManager","$scope","$state","$stateParams","$http","$rootScope","$location","$uibModal","$log","$filter"],angular.module("app.communitys").controller("CommunityNotesCtrl",communityNotesCtrl);