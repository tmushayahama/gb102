var communityTodosCtrl=function(CommunityTodosManager,$scope,$state,$stateParams,$http,$rootScope,$location,$uibModal,$log){var vm=this;vm.communityId=$stateParams.communityId,vm.communityTodosManager=new CommunityTodosManager,vm.todoFormDisplay=!1,vm.defaultCommunityTodoData={communityId:$stateParams.communityId,privacy:0},vm.newCommunityTodoData=angular.copy(vm.defaultCommunityTodoData),vm.showTodoForm=function(){vm.todoFormDisplay=!0},vm.createCommunityTodo=function(data){vm.communityTodosManager.createCommunityTodo(data).then(function(response){vm.todoFormDisplay=!1,vm.newCommunityTodoData=angular.copy(vm.defaultCommunityTodoData)},function(response){console.log(response)})},vm.editCommunityTodo=function(data){vm.communityTodosManager.editCommunityTodo(data).then(function(response){vm.todoFormDisplay=!1,vm.newCommunityTodoData=angular.copy(vm.defaultCommunityTodoData)},function(response){console.log(response)})},vm.editCommunityTodoSections={title:function(communityTodoId,title){var communityTodoData={communityTodoId:communityTodoId,title:title};vm.editCommunityTodo(communityTodoData)}},vm.cancelCommunityTodo=function(form){vm.todoFormDisplay=!1,vm.newCommunityTodoData=angular.copy(vm.defaultCommunityTodoData),form&&(form.$setPristine(),form.$setUntouched())},vm.editedTodo=null,$scope.$watch(angular.bind(this,function(){return vm.communityTodos}),function(){vm.doneCount=vm.communityTodosManager.communityTodos.length-vm.remainingCount,vm.allChecked=!vm.remainingCount},!0),vm.editTodo=function(communityTodo){vm.editedTodo=communityTodo,vm.originalTodo=angular.copy(communityTodo)},vm.doneEditing=function(communityTodo){vm.editedTodo=null,communityTodo.title=communityTodo.title.trim(),communityTodo.title||vm.removeTodo(communityTodo)},vm.openCommunityTodo=function(communityTodo){var modalInstance=$uibModal.open({animation:!0,templateUrl:"community-todo-modal.html",controller:"CommunityTodoCtrl as communityTodoCtrl",backdrop:"static",size:"xl",resolve:{communityTodoData:function(){return communityTodo}}});modalInstance.result.then(function(selectedItem){$scope.selected=selectedItem},function(){$log.info("Modal dismissed at: "+new Date)})},vm.communityTodosManager.getCommunityTodos(vm.communityId)};communityTodosCtrl.$inject=["CommunityTodosManager","$scope","$state","$stateParams","$http","$rootScope","$location","$uibModal","$log"],angular.module("app.communitys").controller("CommunityTodosCtrl",communityTodosCtrl);