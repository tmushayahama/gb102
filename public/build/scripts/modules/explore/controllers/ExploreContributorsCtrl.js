var explorerContributorsCtrl=function(level_categories,ConstantsManager,ExplorerContributorsManager,$scope,$state,$stateParams,$http,$rootScope,$location,$uibModal,$log,$filter){var vm=this;vm.explorerId=$stateParams.explorerId,vm.explorerContributors,vm.explorerContributorTypes,vm.explorerContributorsCopy,vm.constantsManager=new ConstantsManager,vm.explorerContributorsManager=new ExplorerContributorsManager,vm.contributorFormDisplay=!1,vm.defaultExplorerContributorData={explorerId:$stateParams.explorerId,privacy:0},vm.newExplorerContributorData=angular.copy(vm.defaultExplorerContributorData),vm.showContributorForm=function(){vm.contributorFormDisplay=!0},vm.createExplorerContributor=function(data){vm.explorerContributorsManager.createExplorerContributor(data).then(function(response){vm.contributorFormDisplay=!1,vm.newExplorerContributorData=angular.copy(vm.defaultExplorerContributorData),vm.explorerContributorsCopy=angular.copy(vm.explorerContributorsManager.explorerContributors)},function(response){console.log(response)})},vm.editExplorerContributor=function(data){vm.explorerContributorsManager.editExplorerContributor(data).then(function(response){vm.contributorFormDisplay=!1,vm.newExplorerContributorData=angular.copy(vm.defaultExplorerContributorData),vm.explorerContributorsCopy=angular.copy(vm.explorerContributorsManager.explorerContributors)},function(response){console.log(response)})},vm.editExplorerContributorSections={details:function(explorerContributorId,detail){var explorerContributorData={explorerContributorId:explorerContributorId,title:detail.title,description:detail.description};vm.editExplorerContributor(explorerContributorData)}},vm.cancelExplorerContributor=function(form){vm.contributorFormDisplay=!1,vm.newExplorerContributorData=angular.copy(vm.defaultExplorerContributorData),form&&(form.$setPristine(),form.$setUntouched())},vm.revertExplorerContributor=function(explorerContributor,explorerContributorCopy){explorerContributor=explorerContributorCopy},vm.editedContributor=null,$scope.$watch(angular.bind(this,function(){return vm.explorerContributors}),function(){vm.doneCount=vm.explorerContributorsManager.explorerContributors.length-vm.remainingCount,vm.allChecked=!vm.remainingCount},!0),vm.editContributor=function(explorerContributor){vm.editedContributor=explorerContributor,vm.originalContributor=angular.copy(explorerContributor)},vm.doneEditing=function(explorerContributor){vm.editedContributor=null,explorerContributor.title=explorerContributor.title.trim(),explorerContributor.title||vm.removeContributor(explorerContributor)},vm.prepareSelectUsers=function(contributorType){var modalInstance=$uibModal.open({animation:!0,templateUrl:"select-users.html",controller:"SelectUsersCtrl as selectUsersCtrl",backdrop:"static",size:"xl",resolve:{contributorType:function(){return contributorType}}});modalInstance.result.then(function(selectedItem){$scope.selected=selectedItem},function(){$log.info("Modal dismissed at: "+new Date)})},vm.openExplorerContributor=function(explorerContributor){var modalInstance=$uibModal.open({animation:!0,templateUrl:"explorer-contributor-modal.html",controller:"ExplorerContributorCtrl as explorerContributorCtrl",backdrop:"static",size:"xl",resolve:{explorerContributorData:function(){return explorerContributor}}});modalInstance.result.then(function(selectedItem){$scope.selected=selectedItem},function(){$log.info("Modal dismissed at: "+new Date)})},vm.constantsManager.getLevel(level_categories.contributor_types).then(function(data){vm.explorerContributorTypes=data}),vm.explorerContributorsManager.getExplorerContributors(vm.explorerId).then(function(data){vm.explorerContributors=data})};explorerContributorsCtrl.$inject=["level_categories","ConstantsManager","ExplorerContributorsManager","$scope","$state","$stateParams","$http","$rootScope","$location","$uibModal","$log","$filter"],angular.module("app.explorer").controller("ExplorerContributorsCtrl",explorerContributorsCtrl);