var adviceTimelinesCtrl=function(AdviceTimelinesManager,$scope,$state,$stateParams,$http,$rootScope,$location,$uibModal,$log,$filter){var vm=this;vm.adviceId=$stateParams.adviceId,vm.adviceTimelinesCopy,vm.adviceTimelinesManager=new AdviceTimelinesManager,vm.timelineFormDisplay=!1,vm.defaultAdviceTimelineData={adviceId:$stateParams.adviceId,privacy:0},vm.newAdviceTimelineData=angular.copy(vm.defaultAdviceTimelineData),vm.showTimelineForm=function(){vm.timelineFormDisplay=!0},vm.createAdviceTimeline=function(data){vm.adviceTimelinesManager.createAdviceTimeline(data).then(function(response){vm.timelineFormDisplay=!1,vm.newAdviceTimelineData=angular.copy(vm.defaultAdviceTimelineData),vm.adviceTimelinesCopy=angular.copy(vm.adviceTimelinesManager.adviceTimelines)},function(response){console.log(response)})},vm.editAdviceTimeline=function(data){vm.adviceTimelinesManager.editAdviceTimeline(data).then(function(response){vm.timelineFormDisplay=!1,vm.newAdviceTimelineData=angular.copy(vm.defaultAdviceTimelineData),vm.adviceTimelinesCopy=angular.copy(vm.adviceTimelinesManager.adviceTimelines)},function(response){console.log(response)})},vm.editAdviceTimelineSections={details:function(adviceTimelineId,detail){var adviceTimelineData={adviceTimelineId:adviceTimelineId,title:detail.title,description:detail.description};vm.editAdviceTimeline(adviceTimelineData)}},vm.cancelAdviceTimeline=function(form){vm.timelineFormDisplay=!1,vm.newAdviceTimelineData=angular.copy(vm.defaultAdviceTimelineData),form&&(form.$setPristine(),form.$setUntouched())},vm.revertAdviceTimeline=function(adviceTimeline,adviceTimelineCopy){adviceTimeline=adviceTimelineCopy},vm.editedTimeline=null,$scope.$watch(angular.bind(this,function(){return vm.adviceTimelines}),function(){vm.doneCount=vm.adviceTimelinesManager.adviceTimelines.length-vm.remainingCount,vm.allChecked=!vm.remainingCount},!0),vm.editTimeline=function(adviceTimeline){vm.editedTimeline=adviceTimeline,vm.originalTimeline=angular.copy(adviceTimeline)},vm.doneEditing=function(adviceTimeline){vm.editedTimeline=null,adviceTimeline.title=adviceTimeline.title.trim(),adviceTimeline.title||vm.removeTimeline(adviceTimeline)},vm.openAdviceTimeline=function(adviceTimeline){var modalInstance=$uibModal.open({animation:!0,templateUrl:"advice-timeline-modal.html",controller:"AdviceTimelineCtrl as adviceTimelineCtrl",backdrop:"static",size:"xl",resolve:{adviceTimelineData:function(){return adviceTimeline}}});modalInstance.result.then(function(selectedItem){$scope.selected=selectedItem},function(){$log.info("Modal dismissed at: "+new Date)})},vm.adviceTimelinesManager.getAdviceTimelines(vm.adviceId)};adviceTimelinesCtrl.$inject=["AdviceTimelinesManager","$scope","$state","$stateParams","$http","$rootScope","$location","$uibModal","$log","$filter"],angular.module("app.advices").controller("AdviceTimelinesCtrl",adviceTimelinesCtrl);