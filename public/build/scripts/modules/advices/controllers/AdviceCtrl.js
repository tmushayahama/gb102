angular.module("app.advices").controller("AdviceCtrl",["_","ConstantsManager","AdviceManager","$scope","$state","$stateParams","$http","$rootScope","$location","$uibModal","$log","$filter","$css",function(a,b,c,d,e,f,g,h,i,j,k,l,m){var n=this;m.bind({href:"public/css/gb-sass/stylesheets/gb-themes/app-theme-6.css"},d),n.advice=[];n.range=function(b,c){return a.range(b,c)},n.adviceIcons=[],n.adviceIconsArray=[];var o=function(a,b){return Math.floor(Math.random()*b+a)};n.getRandomAdviceIcons=function(){for(var a=0;5>a;a++){for(var b=[],c=0;c<n.adviceIcons.length;c++){var d=o(0,n.adviceIcons.length);b.push(n.adviceIcons[d].name)}n.adviceIconsArray.push(b)}},n.adviceId=f.adviceId,n.adviceManager=new c,n.constantsManager=new b,n.adviceFormDisplay=!1,n.getAdvice=function(a,b){n.adviceManager.getAdvice(a,b).success(function(a){n.advice=a}).error(function(a){console.log(a)})},n.defaultAdviceData={adviceId:f.adviceId,privacy:0},n.newAdviceData=angular.copy(n.defaultAdviceData),n.showForm=function(){n.FormDisplay=!0},n.createAdvice=function(a){n.adviceManager.createAdvice(a).then(function(a){n.FormDisplay=!1,n.newAdviceData=angular.copy(n.defaultAdviceData),n.adviceCopy=angular.copy(n.adviceManager.advice)},function(a){console.log(a)})},n.editAdvice=function(a){n.adviceManager.editAdvice(a).then(function(a){n.FormDisplay=!1,n.newAdviceData=angular.copy(n.defaultAdviceData),n.adviceCopy=angular.copy(n.adviceManager.advice)},function(a){console.log(a)})},n.editAdviceSections={details:function(a,b){var c={adviceId:a,title:b.title,description:b.description};n.editAdvice(c)}},n.cancelAdvice=function(a){n.FormDisplay=!1,n.newAdviceData=angular.copy(n.defaultAdviceData),a&&(a.$setPristine(),a.$setUntouched())},n.revertAdvice=function(a,b){a=b},n.edited=null,d.$watch(angular.bind(this,function(){return n.advice}),function(){n.doneCount=n.adviceManager.advice.length-n.remainingCount,n.allChecked=!n.remainingCount},!0),n.edit=function(a){n.edited=a,n.original=angular.copy(a)},n.doneEditing=function(a){n.edited=null,a.title=a.title.trim(),a.title||n.remove(a)},n.adviceManager.getAdvice(n.adviceId),n.constantsManager.getIcons(1).then(function(a){n.adviceIcons=a,n.getRandomAdviceIcons()})}]);