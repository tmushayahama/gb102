var mentorshipContributionsCtrl=function(level_categories,ConstantsSrv,MentorshipContributionsSrv,$scope,$state,$stateParams,$http,$rootScope,$location,$uibModal,$log,$filter){var vm=this;vm.mentorshipId=$stateParams.mentorshipId,vm.mentorshipContributions,vm.mentorshipContributionTypes,vm.mentorshipContributionsCopy,vm.constantsSrv=new ConstantsSrv,vm.mentorshipContributionsSrv=new MentorshipContributionsSrv,vm.contributionFormDisplay=!1,vm.defaultMentorshipContributionData={mentorshipId:$stateParams.mentorshipId,privacy:0},vm.newMentorshipContributionData=angular.copy(vm.defaultMentorshipContributionData),vm.showContributionForm=function(){vm.contributionFormDisplay=!0},vm.createMentorshipContribution=function(data){vm.mentorshipContributionsSrv.createMentorshipContribution(data).then(function(response){vm.contributionFormDisplay=!1,vm.newMentorshipContributionData=angular.copy(vm.defaultMentorshipContributionData),vm.mentorshipContributionsCopy=angular.copy(vm.mentorshipContributionsSrv.mentorshipContributions)},function(response){console.log(response)})},vm.editMentorshipContribution=function(data){vm.mentorshipContributionsSrv.editMentorshipContribution(data).then(function(response){vm.contributionFormDisplay=!1,vm.newMentorshipContributionData=angular.copy(vm.defaultMentorshipContributionData),vm.mentorshipContributionsCopy=angular.copy(vm.mentorshipContributionsSrv.mentorshipContributions)},function(response){console.log(response)})},vm.editMentorshipContributionSections={details:function(mentorshipContributionId,detail){var mentorshipContributionData={mentorshipContributionId:mentorshipContributionId,title:detail.title,description:detail.description};vm.editMentorshipContribution(mentorshipContributionData)}},vm.cancelMentorshipContribution=function(form){vm.contributionFormDisplay=!1,vm.newMentorshipContributionData=angular.copy(vm.defaultMentorshipContributionData),form&&(form.$setPristine(),form.$setUntouched())},vm.revertMentorshipContribution=function(mentorshipContribution,mentorshipContributionCopy){mentorshipContribution=mentorshipContributionCopy},vm.editedContribution=null,$scope.$watch(angular.bind(this,function(){return vm.mentorshipContributions}),function(){vm.doneCount=vm.mentorshipContributionsSrv.mentorshipContributions.length-vm.remainingCount,vm.allChecked=!vm.remainingCount},!0),vm.editContribution=function(mentorshipContribution){vm.editedContribution=mentorshipContribution,vm.originalContribution=angular.copy(mentorshipContribution)},vm.doneEditing=function(mentorshipContribution){vm.editedContribution=null,mentorshipContribution.title=mentorshipContribution.title.trim(),mentorshipContribution.title||vm.removeContribution(mentorshipContribution)},vm.prepareSelectUsers=function(contributionType){var modalInstance=$uibModal.open({animation:!0,templateUrl:"create-mentorship-contribution-modal.html",controller:"CreateMentorshipContributionCtrl as createMentorshipContributionCtrl",backdrop:"static",size:"xl",resolve:{contributionType:function(){return contributionType}}});modalInstance.result.then(function(selectedItem){$scope.selected=selectedItem},function(){$log.info("Modal dismissed at: "+new Date)})},vm.openMentorshipContribution=function(mentorshipContribution){var modalInstance=$uibModal.open({animation:!0,templateUrl:"mentorship-contribution-modal.html",controller:"MentorshipContributionCtrl as mentorshipContributionCtrl",backdrop:"static",size:"xl",resolve:{mentorshipContributionData:function(){return mentorshipContribution}}});modalInstance.result.then(function(selectedItem){$scope.selected=selectedItem},function(){$log.info("Modal dismissed at: "+new Date)})},vm.constantsSrv.getLevel(level_categories.contribution_types).then(function(data){vm.mentorshipContributionTypes=data}),vm.mentorshipContributionsSrv.getMentorshipContributions(vm.mentorshipId).then(function(data){vm.mentorshipContributions=data})};mentorshipContributionsCtrl.$inject=["level_categories","ConstantsSrv","MentorshipContributionsSrv","$scope","$state","$stateParams","$http","$rootScope","$location","$uibModal","$log","$filter"],angular.module("app.mentorship").controller("MentorshipContributionsCtrl",mentorshipContributionsCtrl);