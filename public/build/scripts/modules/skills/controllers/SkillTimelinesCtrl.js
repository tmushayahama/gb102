var skillTimelinesCtrl=function(SkillTimelinesManager,$scope,$state,$stateParams,$http,$rootScope,$location,$uibModal,$log,$filter){var vm=this;vm.skillId=$stateParams.skillId,vm.skillTimelinesCopy,vm.skillTimelinesManager=new SkillTimelinesManager,vm.timelineFormDisplay=!1,vm.defaultSkillTimelineData={skillId:$stateParams.skillId,privacy:0},vm.newSkillTimelineData=angular.copy(vm.defaultSkillTimelineData),vm.showTimelineForm=function(){vm.timelineFormDisplay=!0},vm.createSkillTimeline=function(data){vm.skillTimelinesManager.createSkillTimeline(data).then(function(response){vm.timelineFormDisplay=!1,vm.newSkillTimelineData=angular.copy(vm.defaultSkillTimelineData),vm.skillTimelinesCopy=angular.copy(vm.skillTimelinesManager.skillTimelines)},function(response){console.log(response)})},vm.editSkillTimeline=function(data){vm.skillTimelinesManager.editSkillTimeline(data).then(function(response){vm.timelineFormDisplay=!1,vm.newSkillTimelineData=angular.copy(vm.defaultSkillTimelineData),vm.skillTimelinesCopy=angular.copy(vm.skillTimelinesManager.skillTimelines)},function(response){console.log(response)})},vm.editSkillTimelineSections={details:function(skillTimelineId,detail){var skillTimelineData={skillTimelineId:skillTimelineId,title:detail.title,description:detail.description};vm.editSkillTimeline(skillTimelineData)}},vm.cancelSkillTimeline=function(form){vm.timelineFormDisplay=!1,vm.newSkillTimelineData=angular.copy(vm.defaultSkillTimelineData),form&&(form.$setPristine(),form.$setUntouched())},vm.revertSkillTimeline=function(skillTimeline,skillTimelineCopy){skillTimeline=skillTimelineCopy},vm.editedTimeline=null,$scope.$watch(angular.bind(this,function(){return vm.skillTimelines}),function(){vm.doneCount=vm.skillTimelinesManager.skillTimelines.length-vm.remainingCount,vm.allChecked=!vm.remainingCount},!0),vm.editTimeline=function(skillTimeline){vm.editedTimeline=skillTimeline,vm.originalTimeline=angular.copy(skillTimeline)},vm.doneEditing=function(skillTimeline){vm.editedTimeline=null,skillTimeline.title=skillTimeline.title.trim(),skillTimeline.title||vm.removeTimeline(skillTimeline)},vm.openSkillTimeline=function(skillTimeline){var modalInstance=$uibModal.open({animation:!0,templateUrl:"skill-timeline-modal.html",controller:"SkillTimelineCtrl as skillTimelineCtrl",backdrop:"static",size:"xl",resolve:{skillTimelineData:function(){return skillTimeline}}});modalInstance.result.then(function(selectedItem){$scope.selected=selectedItem},function(){$log.info("Modal dismissed at: "+new Date)})},vm.skillTimelinesManager.getSkillTimelines(vm.skillId)};skillTimelinesCtrl.$inject=["SkillTimelinesManager","$scope","$state","$stateParams","$http","$rootScope","$location","$uibModal","$log","$filter"],angular.module("app.skills").controller("SkillTimelinesCtrl",skillTimelinesCtrl);